"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3700],{23329:function(e,t,n){n.d(t,{J:function(){return m}});var i=n(70865),r=n(96670),o=n(26297),a=n(52322),s=n(55351),u=n(70314),l=n(5632),c=n(2784),d=n(2380),p=n(69827),v=n(76119);function m(e){e.onClickItem;var t=(0,o.Z)(e,["onClickItem"]),n=(0,l.useRouter)(),m=(0,u.default)().publicRuntimeConfig,g=(0,d.$)(),f="".concat(m.siteOrigin).concat(m.basePath),R=(0,c.useMemo)((function(){return(0,a.jsx)(s.gR,{itemListElements:(e=t.breadCrumbs,e.map((function(e,t){return{position:t+1,name:0===t?"App ".concat(g.t("app_name")):e.title,item:0===t?m.siteOrigin:"".concat(f).concat(e.url)}})))});var e}),[t.breadCrumbs]);return(0,a.jsxs)(a.Fragment,{children:[R,(0,a.jsx)(p.c,(0,r.Z)((0,i.Z)({},t),{onClickItem:function(e){n.asPath!==e&&(0,v.L9)({eventType:"rubelBreadcrumb",context:{current_route:"".concat(m.basePath).concat(n.asPath),destination_route:"/"===e?"".concat(m.basePath):"".concat(m.basePath).concat(e)}})}}))]})}},64335:function(e,t,n){n.r(t),n.d(t,{ModalContainer:function(){return l}});var i=n(70865),r=n(52322),o=n(31146),a=n(99530),s=n(55136),u=n(59620);function l(e){var t=e.content,n=e.isOpen,l=e.onClose,c=e.options,d=c.isCloseable,p=c.modalContentProps,v=void 0===p?{}:p,m=c.onClickPrimaryButton,g=c.onClickSecondaryButton;return(0,r.jsxs)(a.u_,{isOpen:n,onClose:l,closeOnOverlayClick:d,modalContentProps:v,children:[d&&(0,r.jsx)(o.ol,{color:"black",fontWeight:"700"}),function(){if(t){if("string"===typeof t){var e=(0,u.$G)(),o=function(e){switch(e){case"featureNotAvailableModal":return{key:"feature_not_available",btnLength:1};case"comphrendingConfirmationModal":return{key:"comphrending_confirmation_modal",btnLength:2};case"videoNotFinishedConfirmationModal":return{key:"video_not_finished_confirmation_modal",btnLength:2};case"limitDeviceModal":return{key:"limit_device_modal",btnLength:2};case"lockedContentModal":return{key:"locked_content_modal",btnLength:1};case"xpGoldMobileOnlyModal":return{key:"xpgold_mobileonly",btnLength:1};case"leaveEndQuizConfirmationModal":return{key:"leave_end_quiz_confirmation_modal",btnLength:2};case"leaveEndQuizAlertModal":return{key:"leave_end_quiz_alert_modal",btnLength:1};case"notLoggedInModal":return{key:"not_login_warning",btnLength:2};case"seeExplanationEndQuizConfirmationModal":return{key:"see_explanation_end_quiz_confirmation_modal",btnLength:2};case"availableAppOnly":return{key:"nqt_not_supported",btnLength:1};default:return{key:"",btnLength:1}}}(t),a=o.key,c=o.btnLength,d={title:e.t("component:illustration_modal.".concat(a,".title")),description:e.t("component:illustration_modal.".concat(a,".description")),promptType:t,buttons:1===c?[e.t("component:illustration_modal.".concat(a,".primary_button_text"))]:[e.t("component:illustration_modal.".concat(a,".primary_button_text")),e.t("component:illustration_modal.".concat(a,".secondary_button_text"))]},p={onClose:l,isOpen:n,labels:d,onClickPrimaryButton:function(){l(),m&&m()},onClickSecondaryButton:function(){l(),g&&g()}};return(0,r.jsx)(s.S,(0,i.Z)({},p))}return t}return(0,r.jsx)(r.Fragment,{})}()]})}},83700:function(e,t,n){n.d(t,{J6:function(){return ue},f2:function(){return Re},qb:function(){return ce},VS:function(){return _e.VS},jL:function(){return _e.jL},XZ:function(){return ae},Cz:function(){return me},rQ:function(){return ne},KS:function(){return X}});n(45444),n(96859);var i=n(70865),r=n(96670),o=n(50930),a=n(52322),s=n(81382),u=n(64033),l=n(65818),c=n(41135),d=n(3388),p=n(43045),v=n(70314),m=n(25237),g=n.n(m),f=n(2784),R=n(22250),_=n(12446),E=n(94778),h=n(62381),S=(0,h.IU)({displayName:"PlaybackIcon",viewBox:"0 0 24 24",path:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.9155 17.4029C19.3507 17.3262 19.7562 16.829 19.8044 16.3034C20.0652 13.4432 20.0652 10.5568 19.8044 7.69762C19.7562 7.17099 19.3515 6.67484 18.9155 6.59811C16.5789 6.19972 14.2896 6 11.9996 6C9.70951 6 7.42029 6.19972 5.08366 6.59811C4.64765 6.67484 4.24382 7.17099 4.19557 7.69762C3.93481 10.5568 3.93481 13.4432 4.19557 16.3034C4.24382 16.829 4.6485 17.3262 5.08366 17.4029C7.42029 17.8013 9.70951 18 11.9996 18C14.2896 18 16.5789 17.8013 18.9155 17.4029ZM15.1424 4.11832C16.5382 4.21796 17.9419 4.37571 19.3813 4.61131C20.6147 4.81993 21.648 6.0685 21.7877 7.51946C22.0708 10.492 22.0708 13.508 21.7877 16.4837C21.6489 17.9305 20.6156 19.1801 19.3735 19.3908C16.8605 19.8018 14.4489 20 11.9997 20C9.55134 20 7.1397 19.8018 4.618 19.3887C3.38641 19.1801 2.35135 17.9325 2.2116 16.4816C1.92947 13.508 1.92947 10.492 2.2116 7.51531C2.35135 6.06746 3.38641 4.81993 4.62673 4.61028C6.06097 4.37571 7.46288 4.21796 8.85781 4.11832L10.9026 4.02283C10.9883 4.02064 11.0739 4.01822 11.1596 4.0158C11.4391 4.0079 11.7189 4 11.9997 4C12.2805 4 12.5602 4.0079 12.8397 4.0158C12.9254 4.01822 13.0111 4.02064 13.0967 4.02283L15.1424 4.11832ZM8 13.7647V9.56868C7.99912 9.18714 8.37195 8.87695 8.66615 9.0484C9.39081 9.47177 10.1202 10.0115 10.8465 10.549C11.1607 10.7815 11.4743 11.0135 11.7866 11.2356C12.0711 11.4397 12.0711 11.8936 11.7866 12.0968C11.4768 12.3173 11.1657 12.5475 10.8541 12.7782L10.854 12.7783L10.854 12.7783C10.1252 13.3177 9.3933 13.8594 8.66615 14.2849C8.37195 14.4564 7.99912 14.1462 8 13.7647ZM13 13.7647V9.56868C12.9991 9.18714 13.372 8.87695 13.6662 9.0484C14.3908 9.47177 15.1202 10.0115 15.8465 10.549C16.1607 10.7815 16.4743 11.0135 16.7866 11.2356C17.0711 11.4397 17.0711 11.8936 16.7866 12.0968C16.4767 12.3173 16.1657 12.5476 15.854 12.7783C15.1252 13.3177 14.3933 13.8594 13.6662 14.2849C13.372 14.4564 12.9991 14.1462 13 13.7647Z",fill:"#434856"})}),b=(0,h.IU)({displayName:"SettingsIcon",viewBox:"0 0 24 24",path:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.68279 16.3673L7.3398 16.0062L6.87627 16.1699C6.49906 16.3031 6.11874 16.4315 5.74153 16.5519C5.67076 16.5736 5.58131 16.5318 5.55332 16.4821L5.01356 15.5175C4.98556 15.4678 4.99489 15.3659 5.04622 15.3169C5.34021 15.0353 5.63809 14.7592 5.93986 14.4864L6.30773 14.1542L6.17707 13.6687C6.02696 13.1126 5.95075 12.5501 5.95075 11.9996C5.95075 11.4483 6.02696 10.8874 6.17707 10.3297L6.30773 9.84342L5.93908 9.51121C5.63809 9.23918 5.33943 8.96314 5.05011 8.68629C4.99567 8.63333 4.98556 8.53142 5.01356 8.48247L5.55332 7.51632C5.58054 7.46738 5.67387 7.42565 5.73531 7.44571C6.11796 7.56768 6.49906 7.69607 6.87627 7.82928L7.3398 7.99218L7.68279 7.63107C8.45043 6.82542 9.42028 6.24846 10.4881 5.96439L10.9633 5.83841L11.0574 5.34169C11.1344 4.93646 11.2177 4.53122 11.3055 4.13401C11.3219 4.05938 11.4028 4 11.458 4H12.5383C12.5935 4 12.6736 4.05938 12.6892 4.12759C12.7778 4.53122 12.8618 4.93646 12.938 5.34169L13.0321 5.83841L13.5081 5.96439C14.576 6.24846 15.5458 6.82542 16.3127 7.63107L16.6565 7.99218L17.1192 7.82928C17.4972 7.69607 17.8783 7.56768 18.2524 7.44731C18.3232 7.42565 18.4142 7.46657 18.4422 7.51713L18.9827 8.48167C19.0107 8.53142 19.0006 8.63333 18.9508 8.68228C18.6568 8.96314 18.3582 9.23918 18.0564 9.51121L17.6885 9.84342L17.8192 10.3297C17.9693 10.8874 18.0455 11.4483 18.0455 11.9996C18.0455 12.5501 17.9693 13.1126 17.8192 13.6687L17.6885 14.1542L18.0556 14.4864C18.3574 14.7592 18.656 15.0353 18.9461 15.3129C18.9998 15.3659 19.0107 15.4678 18.9827 15.5175L18.4422 16.4829C18.4149 16.531 18.3239 16.5711 18.2586 16.5535C17.8775 16.4315 17.4972 16.3031 17.1192 16.1699L16.6565 16.0062L16.3127 16.3673C15.5458 17.1738 14.576 17.7499 13.5081 18.0332L13.0321 18.1608L12.938 18.6575C12.8618 19.0635 12.7778 19.468 12.6907 19.8652C12.6736 19.939 12.5927 20 12.5383 20H11.4595C11.4035 20 11.3219 19.939 11.3071 19.8716C11.2177 19.468 11.1344 19.0635 11.0574 18.6575L10.9633 18.1608L10.4881 18.0332C9.42028 17.7499 8.45043 17.1738 7.68279 16.3673ZM9.67616 20.5722C9.86759 21.3976 10.6039 21.9983 11.4302 22H12.5681C13.3919 21.9983 14.129 21.3976 14.3213 20.5647C14.381 20.294 14.4391 20.0225 14.4947 19.7509C15.5435 19.3992 16.5081 18.8328 17.3278 18.0842C17.5847 18.1719 17.8448 18.2555 18.1058 18.3382C18.9067 18.5872 19.7829 18.2321 20.1944 17.5019L20.7622 16.4977C21.1745 15.7683 21.0338 14.8159 20.4243 14.2294C20.2255 14.0398 20.0242 13.8543 19.8214 13.6688C19.9367 13.1124 19.9956 12.5527 19.9956 11.9996C19.9956 11.4465 19.9367 10.8868 19.8214 10.3303C20.0242 10.1449 20.2263 9.95773 20.4276 9.76724C21.0346 9.18493 21.1753 8.23167 20.7622 7.50148L20.1944 6.4981C19.7829 5.76791 18.9043 5.41702 18.0993 5.66181C17.8424 5.74452 17.5839 5.82806 17.3278 5.91495C16.5081 5.16722 15.5427 4.59911 14.4939 4.24821C14.4391 3.97502 14.3802 3.70266 14.3197 3.4278C14.129 2.59986 13.3911 2 12.5665 2H11.4302C10.6047 2 9.86759 2.59986 9.67452 3.43364C9.6148 3.70517 9.55754 3.97586 9.5019 4.24821C8.45229 4.59911 7.48857 5.16638 6.66884 5.91495C6.41114 5.82806 6.15181 5.74285 5.88838 5.6593C5.08747 5.41535 4.21292 5.76791 3.80224 6.49726L3.23366 7.50148C2.82134 8.23084 2.96124 9.18326 3.57235 9.77058C3.77197 9.95856 3.9724 10.1457 4.17529 10.3303C4.05912 10.8868 4.00104 11.4465 4.00104 11.9996C4.00104 12.5527 4.05912 13.1124 4.17529 13.6688C3.9724 13.8543 3.77033 14.0414 3.56908 14.2328C2.96206 14.8142 2.82053 15.7675 3.23366 16.4977L3.80224 17.5011C4.21456 18.2329 5.09319 18.5863 5.89493 18.3365C6.15344 18.2555 6.41114 18.1711 6.66884 18.0842C7.48857 18.8328 8.45311 19.3992 9.5019 19.7509C9.55754 20.0233 9.61562 20.2957 9.67616 20.5722ZM9 12C9 10.3455 10.3455 9 12 9C13.6545 9 15 10.3455 15 12C15 13.6545 13.6545 15 12 15C10.3455 15 9 13.6545 9 12ZM13 12C13 11.448 12.552 11 12 11C11.448 11 11 11.448 11 12C11 12.552 11.448 13 12 13C12.552 13 13 12.552 13 12Z",fill:"#434856"})}),x=n(31905),C=n(44870),w=n(77451),T=n(42856),y=n(30765),N=n(8151),A=n(98788),L=n(94776),O=n.n(L),k=n(82066),I=n(42838),D=n(187),Z=n(62680),j=D.Union(D.Literal("unknownUserRole"),D.Literal("teacher"),D.Literal("student"),D.Literal("admin"),D.Literal("parent"),D.Literal("employee"),D.Literal("company"),D.Literal("department"),D.Literal("skillAcademyUser"),D.Literal("instructor"),D.Literal("unclaimed")),P=D.Union(D.Literal("unknownOtpType"),D.Literal("whatsappOtpType"),D.Literal("smsOtpType"),D.Literal("hybridOtpType")),M=D.Union(D.Literal("unknownkRoleValidation"),D.Literal("requestRole"),D.Literal("databaseRole")),U=D.Union(D.Literal("unknownLoginType"),D.Literal("facebook"),D.Literal("google"),D.Literal("default"),D.Literal("apple"),D.Literal("passwordless"),D.Literal("whatsapp"),D.Literal("phonenumber"),D.Literal("phonenumberwithotp"),D.Literal("defaultwithotp"),D.Literal("googleToken"),D.Literal("samlAssertion"));D.Record({token:D.String,refresh_token:D.String,expires_in:D.Number,role:j,email:D.String,name:D.String,shortname:D.String,unique_order_code:D.String,qiscus_email:D.String,profpic_without_key:D.String,device_id:D.String,device_name:D.String,firebase_token:D.String,is_active:D.Boolean,is_anonymous_email:D.Boolean,is_registration:D.Boolean,is_delete_scheduled:D.Boolean}),D.Record({username:D.String,password:D.String,type:U,role:j,client_id:D.String,client_secret:D.String,device_id:D.String,device_name:D.String,use_firebase_token:D.String,oauth_token:D.String,phone_number:D.String,created_by:D.String,email:D.String,secret:D.String,name:D.String,role_validation_type:M,otp:D.String,otp_type:P,otp_tenant_name:D.String,user_metadata_tenant_name:D.String}),D.Record({oneTimeToken:D.String});var q=(0,v.default)().publicRuntimeConfig,Q=(D.Array(D.Record({token:D.String,refreshToken:D.String,role:D.String})),"Web_".concat(q.appName),D.Record({token:D.String}));function V(e){return new Promise((function(t,n){return(0,Z.Z)((0,r.Z)((0,i.Z)({},e),{url:"/api/get-token",method:"get"})).then((function(e){return Q.check(e)})).then((function(e){t(e)})).catch((function(e){return(0,I.Z)(e,D.ValidationError)?n({_tag:"DECODE_ERROR",message:e.message}):e&&"errorCode"in e?(e.errorCode,n({_tag:"SERVER_ERROR",error:e})):n({_tag:"UNKNOWN_ERROR",error:e})}))}))}var G=n(59856),z=n(76119),B=(D.Record({}),D.Record({"com.widevine.alpha":D.String.Or(D.Null).Or(D.Undefined),"com.microsoft.playready":D.String.Or(D.Null).Or(D.Undefined),"com.apple.fps.1_0":D.String.Or(D.Null).Or(D.Undefined),"org.w3.clearkey":D.String.Or(D.Null).Or(D.Undefined)}));function W(e,t){return function(e,t){return new Promise((function(n,o){return(0,Z.Z)((0,r.Z)((0,i.Z)({},t),{url:"/api/v3/content-auth/drm",method:"get",withAuth:!0,params:e})).then((function(e){return B.check(e)})).then((function(e){n(e)})).catch((function(e){if((0,I.Z)(e,D.ValidationError))return o({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e)switch(e.errorCode){case 910210001:return o({_tag:"INTERNAL_ERROR",error:e});case 910210002:return o({_tag:"BAD_REQUEST",error:e});case 910210003:return o({_tag:"FORBIDDEN",error:e});default:return o({_tag:"SERVER_ERROR",error:e})}return o({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}var H=n(59620),F=g()((function(){return Promise.all([n.e(504),n.e(5647),n.e(6582),n.e(7641),n.e(8554)]).then(n.bind(n,18554)).then((function(e){return e.RubelWebPlayer}))}),{loadableGenerated:{webpack:function(){return[18554]}},ssr:!1});function X(e){var t,n,m,g,h,L,I,D,Z,j,P,M,U,q,Q,B,X,Y,J,$,ee,te,ne,ie,re=(0,v.default)().publicRuntimeConfig,oe=e.mission,ae=oe.serial,se=oe.missionType,ue=oe.isUserHasActivePackage,le=oe.content,ce=oe.isFreeContent,de=!oe.isMissionDone&&(null===(t=e.gamificationCheckpoints)||void 0===t?void 0:t.checkpoints.length)>0,pe="BANDERGURU"===se,ve=!!le,me=ve&&le[0],ge=(0,H.aC)().isLoggedIn,fe=(0,s.pm)(),Re=(0,f.useRef)(0),_e=(0,f.useRef)(1),Ee=(0,f.useState)(!1),he=Ee[0],Se=Ee[1],be=(0,f.useState)(!1),xe=be[0],Ce=be[1],we=(0,f.useState)(null),Te=we[0],ye=we[1],Ne=(0,f.useState)(!1),Ae=Ne[0],Le=Ne[1],Oe=(0,f.useState)(!1),ke=Oe[0],Ie=Oe[1],De=(0,f.useState)({status:"neutral",isUpdated:!1}),Ze=De[0],je=De[1],Pe=(0,f.useState)({previousIVQserial:"",startGameTime:0}),Me=Pe[0],Ue=Pe[1],qe=(0,f.useState)("GuestFree"),Qe=qe[0],Ve=qe[1],Ge=(0,f.useState)(!1),ze=Ge[0],Be=Ge[1],We=(0,f.useMemo)((function(){if(ve&&me){var e;if(pe&&(null===me||void 0===me||null===(e=me.banderguru)||void 0===e?void 0:e.nodes)){var t,n,o,a,s=me.banderguru.nodes.find((function(e){var t;return e.serial===(null===me||void 0===me||null===(t=me.banderguru)||void 0===t?void 0:t.entryPoint)}));if(null===s||void 0===s?void 0:s.video)return(0,r.Z)((0,i.Z)({},K(s.video)),{nodes:me.banderguru.nodes.map((function(e){var s,u,l;return(0,r.Z)((0,i.Z)({},e),{next:{nodeSerial:null!==(t=null===e||void 0===e||null===(s=e.next)||void 0===s?void 0:s.nodeSerial)&&void 0!==t?t:"",seekTo:null!==(n=null===e||void 0===e||null===(u=e.next)||void 0===u?void 0:u.seekTo)&&void 0!==n?n:0,state:null!==(o=null===e||void 0===e||null===(l=e.next)||void 0===l?void 0:l.state)&&void 0!==o?o:"NEUTRAL"},video:K(null!==(a=null===e||void 0===e?void 0:e.video)&&void 0!==a?a:{serial:"",title:""})})})),videoPreviewDuration:me.videoPreviewDuration,videoPreviewFullpath:me.videoPreviewFullpath,videoPreviewFullpathHls:me.videoPreviewFullpathHls})}return(0,r.Z)((0,i.Z)({},K(me)),{nodes:void 0,videoPreviewDuration:me.videoPreviewDuration,videoPreviewFullpath:me.videoPreviewFullpath,videoPreviewFullpathHls:me.videoPreviewFullpathHls})}return null}),[ve,me]),He=function(){var e=document.getElementById("video-content-container");e&&e.scrollIntoView({behavior:"smooth",block:"start"})};(0,f.useEffect)((function(){He(),je((0,r.Z)((0,i.Z)({},Ze),{isUpdated:!0}))}),[We]),(0,f.useEffect)((function(){e.videoHasMounted||e.onToggleVideoMounted(!0)}),[e.videoHasMounted]),(0,f.useEffect)((function(){ce?Ve(ge?"RegisteredFree":"GuestFree"):(Ve(ge?ue?"Subscribed":"RegisteredPremium":"GuestPremium"),ue||Be(!0))}),[ge,ue,ce]),(0,f.useEffect)((function(){if(We&&me){var t,n,i,r,o,a,s=(0,H.BZ)(We.duration,me.currentCheckpointInterval),u=null!==(n=me.checkpoints)&&void 0!==n?n:[],l=e.startTime>0?e.startTime:We.lastSeen>=We.duration?0:We.lastSeen,c=de?null===(t=e.gamificationCheckpoints)||void 0===t?void 0:t.checkpoints.map((function(e){return e.checkpoint})):[],d={videoCheckpoints:s,userCheckpoints:u,startTime:l,videoDuration:We.duration,videoSerial:We.serial,videoCheckpointConfig:{currentCheckpointInterval:null!==(i=me.currentCheckpointInterval)&&void 0!==i?i:0,lowerBoundPercent:null!==(r=me.lowerBoundPercent)&&void 0!==r?r:0,minimumWatchPercent:null!==(o=me.minimumWatchPercent)&&void 0!==o?o:0,upperBoundPercent:null!==(a=me.upperBoundPercent)&&void 0!==a?a:0},gamificationConfig:{hasGamification:de,checkpointSubmissionValue:de?e.gamificationCheckpoints.checkpointSubmissionValue:0,gamificationRewardCheckpoints:de?e.gamificationCheckpoints.checkpoints:[]},gamificationCheckpoints:c,userGamificationCheckpoints:[]};e.handleInitVideo(d)}}),[We]),(0,f.useEffect)((function(){if(me){var t=function(){var t=Re.current||0;e.handleAccomplishment(t,me.version),setTimeout((function(){return null}),500)};return window.addEventListener("beforeunload",t,!1),function(){return window.removeEventListener("beforeunload",t)}}}),[e.userCheckpoints]);var Fe,Xe,Ke,Ye,Je,$e,et,tt,nt,it,rt,ot,at,st,ut,lt=(Fe={enabled:ge&&ue,onError:function(e){switch(null===e||void 0===e?void 0:e._tag){case"BAD_REQUEST":var t;fe({description:null!==(t=e.error.errorDescription)&&void 0!==t?t:"Error ".concat(e.error.errorCode),status:"error",isClosable:!0});break;case"UNKNOWN_ERROR":var n;fe({description:null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.message,status:"error",isClosable:!0});break;case"DECODE_ERROR":fe({description:e.message,status:"error",isClosable:!0})}}},(0,k.useQuery)("drm-licenses",(0,A.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W({});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error("[fetchDrmLicense]",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),Fe)),ct=lt.isLoading,dt=lt.data,pt=ue?dt:{},vt=(0,G.qy)(ae,{enabled:me&&""!==me.serial&&ge,onSuccess:function(e){var t=-1===(null===e||void 0===e?void 0:e.value)?"dislike":1===(null===e||void 0===e?void 0:e.value)?"like":"neutral";je({status:t,isUpdated:!0})},onError:function(e){je({status:"neutral",isUpdated:!0})}}).isLoading,mt=(0,G.fD)(),gt=me&&We?null!==(Xe=me.timeline)&&void 0!==Xe?Xe:We.timeline:[],ft=null!==(Ke=gt&&(0,o.Z)(gt).reverse())&&void 0!==Ke?Ke:[],Rt=function(e){return ft?ft.find((function(t){return t.videoTime<=e})):null},_t=function(t,n,i,r){!ge&&"VIDEO_CONTENT"!==r&&"BANDERGURU"!==r&&window?window.location.href="".concat(window.location.origin,"/login"):e.handleRouteChange(t,n,i)},Et=(0,H.HR)({id:function(){return{adapto:"https://cdn-web.ruangguru.com/static/adapto.png?convert=webp",adaptoX:"https://cdn-web.ruangguru.com/static/adaptox.png?convert=webp"}},th:function(){return{adapto:null,adaptoX:null}},vn:function(){return{adapto:null,adaptoX:null}}}),ht="Subscribed"!==Qe&&"RegisteredFree"!==Qe,St=(0,f.useMemo)((function(){return"Subscribed"===Qe||"RegisteredFree"===Qe?{dash:We.fullpathClearKey&&""!==We.fullpathClearKey?We.fullpathClearKey:We.fullpathEncoded,hls:We.fullpathEncodedHls}:{dash:We.videoPreviewFullpath,hls:We.videoPreviewFullpathHls}}),[Qe,We]),bt=(ge&&!!We&&!!We.fullpathClearKey&&""!==We.fullpathClearKey&&dt&&dt["org.w3.clearkey"],(0,k.useQuery)(["user-token"],(0,A.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",V(Ye));case 4:throw e.prev=4,e.t0=e.catch(0),console.error("userToken",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,4]])}))))),xt=bt.data,Ct=bt.isSuccess,wt=bt.isLoading,Tt=function(){var t=function(){var t,n,i=e.meta.gradeName,r=i&&""!==i?i.match(/\d+/)[0]:"11";return{gradeLevel:null!==(t={1:"kelas-sd",2:"kelas-sd",3:"kelas-sd",4:"kelas-sd",5:"kelas-sd",6:"kelas-sd",7:"kelas-smp",8:"kelas-smp",9:"kelas-smp",10:"kelas-sma",11:"kelas-sma",12:"kelas-sma"}[r])&&void 0!==t?t:"kelas-sma",tag:null!==(n={1:"rubel",2:"rubel",3:"rubel",4:"rubel",5:"rubel",6:"rubel",7:"rubel",8:"rubel",9:"rubel",10:"rubel",11:"rubel-utbk",12:"rubel-utbk"}[r])&&void 0!==n?n:"rubel-utbk"}}(),n=t.gradeLevel,i=t.tag,r=new URL(re.paymentUrl),o="".concat(r.origin,"/packages-list?tag=").concat(i,"&grade=").concat(n),a="".concat(window.location.origin,"/redirect-with-ott?target=").concat(encodeURIComponent(o)),s=ge?a:o;window.location.href=s};return(0,a.jsxs)(u.xu,{id:"video-content-container",scrollMarginTop:"60px",w:"full",children:[!e.videoHasMounted||ct||vt||ge&&wt||!We||!me||!Ze.isUpdated?(0,a.jsx)(l.Od,{minH:{base:"220px",md:"420px",lg:"500px"}}):(0,a.jsx)(u.xu,{minH:{base:"200px",md:"390px",lg:"320px","2xl":"500px"},children:(0,a.jsx)(F,{autoplay:!0,src:St,config:{drm:{servers:pt}},banderEntrySerial:null===me||void 0===me||null===(n=me.banderguru)||void 0===n?void 0:n.entryPoint,banderNodes:We.nodes,timelines:gt,quizzes:We.quiz,startTime:e.startTime,reportReasons:[],onError:function(t){if(!(0,N.Q)())if(t.message)t.message.includes("play()")||t.message.includes("permission")||fe({description:t.message,status:"error",isClosable:!0});else{var n=Array.isArray(t.data)?t.data.toString():"";t.code&&1001==t.code&&n.includes("Access Denied")?fe({title:e.labels.videoError.accessDeniedTitle,description:e.labels.videoError.accessDeniedDescription,status:"warning",isClosable:!0}):t.code&&3016==t.code?fe({title:e.labels.videoError.browserNotSupported,status:"error",isClosable:!0}):fe({title:e.labels.videoError.title,description:JSON.stringify(t),status:"error",isClosable:!0})}},onReportClick:function(){e.onPreventGuestAction((function(){return e.onReportClick({videoSerial:"".concat(We.serial,"|").concat(We.videoVersionSerial),videoVersion:We.version})}))},reportIcon:(0,a.jsx)(R.U,{color:"black"}),options:{reportButtonText:e.labels.report.buttonText,playbackRateTriggerText:e.labels.video.speed,playbackRateHeaderText:e.labels.video.speedTitle,playbackRateCancelText:e.labels.video.cancel,qualityHeaderText:e.labels.video.resolutionTitle,qualityCancelText:e.labels.video.cancel,videoTitle:We.title,videoLogoUrl:e.hasAdaptoX?Et.adaptoX:pe?Et.adapto:null},likeIcon:(0,a.jsx)(_.l,{color:"like"===Ze.status?"#20A4B0":"black"}),dislikeIcon:(0,a.jsx)(E.k,{color:"dislike"===Ze.status?"#20A4B0":"black"}),playbackRateIcon:(0,a.jsx)(S,{}),qualityIcon:(0,a.jsx)(b,{}),rateStatus:Ze.status,onScreenshotClick:e.onScreenshotClick,onRated:function(t){e.onPreventGuestAction((function(){return function(t){var n=(0,p.w6)(t)({like:function(){return 1},dislike:function(){return-1},neutral:function(){return 0}});mt.mutate({ContentType:"video_mission_rubel",Value:n,ContentParentSerial:e.journeySerial,ContentSerial:ae}),je({status:t,isUpdated:!0})}(t)}))},onShareClick:function(){return e.onPreventGuestAction((function(){return e.handleShare()}))},shareTriggerText:e.labels.video.share,onTimeUpdate:function(t){var n=Math.floor(t);Re.current=n,e.onTimeUpdateVideo(n,_e.current),!ke&&Rt(n)&&ye(Rt(n))},onAutoplayNextVisible:function(){return Ce(!0)},autoplayNextComponent:(0,a.jsx)(u.xu,{w:"full",children:(0,a.jsx)(x.f,{getCountdownSubtitle:e.labels.nextMissionCard.getCountdownSubtitle,title:null!==(Je=null===(m=e.mission)||void 0===m||null===(g=m.nextAutoplayMission)||void 0===g?void 0:g.title)&&void 0!==Je?Je:"",subtitle:e.labels.nextMissionCard.subtitle,ariaLabels:{nextMission:e.labels.nextMissionCard.nextMission,stopAutoplay:e.labels.nextMissionCard.stopAutoplay},missionImageVariant:null===(h=e.mission)||void 0===h||null===(L=h.nextAutoplayMission)||void 0===L?void 0:L.type,onClickNext:function(){var t,n,i,r;return _t(null!==($e=null===(t=e.mission)||void 0===t||null===(n=t.nextAutoplayMission)||void 0===n?void 0:n.slug)&&void 0!==$e?$e:"",e.mission.isMissionDone,!0,null===(i=e.mission)||void 0===i||null===(r=i.nextAutoplayMission)||void 0===r?void 0:r.type)},onAutoplayEnd:function(){var t,n,i,r;return _t(null!==(et=null===(t=e.mission)||void 0===t||null===(n=t.nextAutoplayMission)||void 0===n?void 0:n.slug)&&void 0!==et?et:"",e.mission.isMissionDone,!1,null===(i=e.mission)||void 0===i||null===(r=i.nextAutoplayMission)||void 0===r?void 0:r.type)},autoPlayDuration:1e3*(null!==(tt=null===(I=e.mission)||void 0===I||null===(D=I.nextAutoplayMission)||void 0===D?void 0:D.timer)&&void 0!==tt?tt:0),videoThubmbailUrl:null===(Z=e.mission)||void 0===Z||null===(j=Z.nextAutoplayMission)||void 0===j?void 0:j.videoThumbnailURL,isShown:xe})}),styles:{autoplayRoot:{width:"50%","@sm":{right:"0.75rem",bottom:"0.75rem"},"@lg":{right:"1.25rem",bottom:"2.25rem"}}},onEnd:function(){if(me&&!ht){if(!ke){var t=(null===me||void 0===me?void 0:me.duration)||Re.current||0;ye(null),e.handleAccomplishment(t,me.version),Se(!0)}ke&&(Ie(!1),Le(!1))}e.sendTracker.videoFinished(ht)},onPause:function(t){return n=t.stats.pauseTime,void e.sendTracker.videoPause(n);var n},onPlaybackRateChange:function(e){return _e.current=e},onQuizVisible:function(t,n,o,a){!function(t,n,o,a){var s,u;Le(!0);var l=null!==(u=Array.isArray(null===(s=We.quiz.find((function(e){return e.serial===t})))||void 0===s?void 0:s.quizData))&&void 0!==u&&u;e.sendTracker.videoIvqShowQuestion(We.videoVersionSerial,t,Me.previousIVQserial,n,o,l,a),Ue((function(e){return(0,r.Z)((0,i.Z)({},e),{previousIVQserial:t})}))}(t,n,o,a)},onAnswerIVQ:function(t,n,o,a,s,u){var l,c;Le(!1);var d=null!==(c=Array.isArray(null===(l=We.quiz.find((function(e){return e.serial===a})))||void 0===l?void 0:l.quizData))&&void 0!==c&&c;Ue((function(e){return(0,r.Z)((0,i.Z)({},e),{startGameTime:void 0!==u?Date.now():e.startGameTime})})),e.sendTracker.answerInVideoQuiz(We.videoVersionSerial,a,o,s,d,"",t,null!==u&&void 0!==u?u:"")},onTimelineChange:function(e,t,n){t&&Te&&(ye((0,r.Z)((0,i.Z)({},Te),{isHiddenVideo:t})),Ie(!0),Le(!0))},onPlay:function(){pe||e.sendTracker.videoStartResume("")},onBuffering:function(t){if((null===t||void 0===t?void 0:t.stats)&&We){var n=t.stats,i=n.licenseTime,r=n.width,o=n.height,a=n.estimatedBandwidth,s=null!==i&&void 0!==i?i:0,u=We.fullpath,l="".concat(r,"x").concat(o),c=a.toString();e.sendTracker.videoBufferingTime(s,u,l,c)}},onScrub:function(t,n){e.sendTracker.videoScrub(Math.floor(t),n)},gamification:{isRewardClaimed:!de,autoCloseTimer:5e3,onClick:function(){var t,n,i,r,o,a,s,u,l,c,d;((0,z.L9)({eventType:"gamificationRewardStatusOpen",context:{class_serial:null===(t=e.userInfo)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.gradeSerial,class_name:null===(i=e.userInfo)||void 0===i||null===(r=i.profile)||void 0===r?void 0:r.classSerial,user_gold:null===(o=e.userInfo)||void 0===o||null===(a=o.profile)||void 0===a?void 0:a.totalGold,user_xp:null===(s=e.userInfo)||void 0===s||null===(u=s.profile)||void 0===u?void 0:u.totalXp,user_level:null===(l=e.userInfo)||void 0===l||null===(c=l.profile)||void 0===c?void 0:c.levelNumber}}),ge&&de&&e.gamificationSectionRef.current)&&(null===(d=e.gamificationSectionRef)||void 0===d||d.current.toggle())},icon:(0,a.jsx)(C.q,{labels:e.labels.gamification,ref:e.gamificationBottomControlRef,styles:{top:"-3px",bg:"transparent",position:"absolute",right:"0"}})},rewardSummary:(0,a.jsx)(u.xu,{style:{cursor:"pointer"},onClick:function(){var t,n,i,r,o;(null===(t=e.gamificationOnVideoRef)||void 0===t?void 0:t.current)&&e.gamificationOnVideoRef.current.animate({variant:"userGamification",data:{gold:(null===(n=e.userInfo)||void 0===n||null===(i=n.profile)||void 0===i?void 0:i.totalGold)||0,xp:(null===(r=e.userInfo)||void 0===r||null===(o=r.profile)||void 0===o?void 0:o.totalXp)||0}})},minW:"300px",children:(0,a.jsx)(C.q,{labels:e.labels.gamification,ref:e.gamificationOnVideoRef})}),videoGameText:{titleText:e.labels.videoGame.exitTitle,descriptionText:e.labels.videoGame.exitDescription,cancelText:e.labels.videoGame.exitCancel,submitText:e.labels.videoGame.exitSubmit},onVideoGameClose:function(t){var n,i,r,o;r=t.serial,o=null!==(i=null===t||void 0===t||null===(n=t.interactiveDetail)||void 0===n?void 0:n.gameURL)&&void 0!==i?i:"",e.sendTracker.interactivityClickCloseButton(We.videoVersionSerial,r,o)},onVideoGameFinish:function(t){var n;return function(t,n){var i=Date.now()-Me.startGameTime;e.sendTracker.interactivityEnded(We.videoVersionSerial,t,n,Math.floor(i/1e3))}(t.serial,null!==(nt=null===t||void 0===t||null===(n=t.interactiveDetail)||void 0===n?void 0:n.gameURL)&&void 0!==nt?nt:"")},clearkeyAuthorization:xt&&Ct?xt.token:void 0,country:re.country,videoConditionState:ht?"PREVIEW":"FULL",videoFullDuration:We.duration,videoPreview:{onSubscribeClick:function(){Tt()},onLoginRegisterClick:function(){window.location.href="".concat(window.location.origin,"/login")},loginRegisterText:e.labels.videoPreview.loginRegisterText,loginRegisterButtonText:e.labels.videoPreview.loginRegisterButtonText,loginRegisterSubscribeText:e.labels.videoPreview.loginRegisterSubscribeText,subscribeText:e.labels.videoPreview.subscribeText,subscribeButtonText:e.labels.videoPreview.subscribeButtonText},isLoggedIn:ge,isFreeContent:ce})}),(0,a.jsxs)(u.xu,{width:"100%",borderTopColor:"gray.40",borderTopWidth:"1px",mt:"60px",position:"relative",children:[ge&&de&&(0,a.jsx)(u.xu,{w:"100%",position:"absolute",children:(0,a.jsx)(w.e,{checkpointCount:e.gamificationCheckpoints.checkpoints.length,checkpointDoneCount:0,gold:null!==(it=null===(P=e.userInfo)||void 0===P||null===(M=P.profile)||void 0===M?void 0:M.totalGold)&&void 0!==it?it:0,xp:null!==(rt=null===(U=e.userInfo)||void 0===U||null===(q=U.profile)||void 0===q?void 0:q.totalXp)&&void 0!==rt?rt:0,requiredXp:null!==(ot=null===(Q=e.userInfo)||void 0===Q||null===(B=Q.profile)||void 0===B?void 0:B.xpRequired)&&void 0!==ot?ot:0,labels:e.labels.gamification,ref:e.gamificationSectionRef})}),(0,a.jsxs)(u.xu,{w:"100%",children:[!ce&&ze&&(0,a.jsxs)(c.bZ,{status:"warning",colorScheme:"orange",backgroundColor:"orange.20",justifyContent:"space-between",children:[(0,a.jsxs)(u.kC,{children:[(0,a.jsx)(c.zM,{color:"orange.80",alignSelf:"flex-start"}),(0,a.jsx)(c.X,{children:ge?e.labels.videoPremiumInfo:e.labels.videoPremiumInfoGuest})]}),(0,a.jsx)(d.P,{alignSelf:"flex-start",position:"relative",right:-1,top:-1,onClick:function(){return Be(!1)}})]}),(0,a.jsxs)(u.xu,{padding:{base:3,md:5},children:[(0,a.jsx)(u.xv,{textStyle:"subtitle",as:"h1",lineHeight:"24px",children:me&&me.title}),(0,a.jsx)(u.xv,{textStyle:"body-m",lineHeight:"20px",children:me&&me.description}),gt&&gt.length>0&&(0,a.jsx)(u.xu,{mt:"5",px:{base:1,md:0},children:gt&&gt.length>0&&(0,a.jsx)(T.j,{timelines:gt,activeTimeline:Te,onScrollToVideoContainer:He,onChangeStartTime:e.onChangeStartTime,labels:{timelineVideo:e.labels.timelineVideo,adaptiveVideo:e.labels.adaptiveVideo},isOnVideoPreview:ht,isDisabledTimeline:Ae,videoPreviewDuration:We.videoPreviewDuration,currentHref:e.mission.slug})}),e.transcriptAvailable&&(0,a.jsx)(y.L,{videoTitle:We.title,videoSubtitles:e.videoSubtitles,userVideoStatus:Qe,paymentUrl:re.paymentUrl})]})]})]}),(0,a.jsx)(u.xu,{position:{base:"fixed",lg:"sticky"},zIndex:"10",bottom:"24px",w:"full",mt:"60px",children:(0,a.jsx)(x.f,{getCountdownSubtitle:e.labels.nextMissionCard.getCountdownSubtitle,ariaLabels:{nextMission:e.labels.nextMissionCard.nextMission,stopAutoplay:e.labels.nextMissionCard.stopAutoplay},isShown:!0,title:null!==(at=null===(X=e.mission)||void 0===X||null===(Y=X.nextAutoplayMission)||void 0===Y?void 0:Y.title)&&void 0!==at?at:"",subtitle:e.labels.nextMissionCard.subtitle,missionImageVariant:null===(J=e.mission)||void 0===J||null===($=J.nextAutoplayMission)||void 0===$?void 0:$.type,onClickNext:function(){var t,n,i,r,o;_t(null!==(o=null===(t=e.mission)||void 0===t||null===(n=t.nextAutoplayMission)||void 0===n?void 0:n.slug)&&void 0!==o?o:"",e.mission.isMissionDone,!0,null===(i=e.mission)||void 0===i||null===(r=i.nextAutoplayMission)||void 0===r?void 0:r.type)},onAutoplayEnd:function(){var t,n,i,r;return _t(null!==(st=null===(t=e.mission)||void 0===t||null===(n=t.nextAutoplayMission)||void 0===n?void 0:n.slug)&&void 0!==st?st:"",e.mission.isMissionDone,!1,null===(i=e.mission)||void 0===i||null===(r=i.nextAutoplayMission)||void 0===r?void 0:r.type)},videoThubmbailUrl:null===(ee=e.mission)||void 0===ee||null===(te=ee.nextAutoplayMission)||void 0===te?void 0:te.videoThumbnailURL,automaticAutoplay:!ht&&he,autoPlayDuration:ht?0:1e3*(null!==(ut=null===(ne=e.mission)||void 0===ne||null===(ie=ne.nextAutoplayMission)||void 0===ie?void 0:ie.timer)&&void 0!==ut?ut:0)})})]})}var K=function(e){return{serial:e.serial,title:e.title,description:e.description,file:e.file,fullpath:e.fullpath,fullpathHls:e.fullpathHls,updatePath:e.updatePath,updatePathHls:e.updatePathHls,fullpathEncoded:e.fullpathEncoded,fullpathEncodedHls:e.fullpathEncodedHls,fullpathClearKey:e.fullpathClearKey,lastSeen:e.lastSeen,duration:e.duration,version:e.version,filesize:e.filesize,thumbnailUrl:e.thumbnailUrl,movingThumbnailUrl:e.movingThumbnailUrl,timeline:e.timeline,quiz:e.quiz,videoVersionSerial:"videoVersionSerial"in e?e.videoVersionSerial:"",videoPreviewDuration:e.videoPreviewDuration,videoPreviewFullpath:e.videoPreviewFullpath,videoPreviewFullpathHls:e.videoPreviewFullpathHls}},Y=n(26297),J=n(5632),$=n(22945),ee=function(e){return e.includes("/v/")?"VIDEO_CONTENT":e.includes("/q/")?"QUIZ":e.includes("/eq/")?"END_QUIZ":e.includes("/s/")?"IMAGE_SUMMARY":e.includes("/es/")?"END_SUMMARY":e.includes("/w/")?"WORKSHEET":""},te=function(e){return(0,p.w6)(e)({VIDEO_CONTENT:function(){return"/v/"},BANDERGURU:function(){return"/v/"},QUIZ:function(){return"/q/"},END_QUIZ:function(){return"/eq/"},IMAGE_SUMMARY:function(){return"/s/"},END_SUMMARY:function(){return"/es/"},EXERCISE:function(){return"/"},QUESTION_BANK:function(){return"/"},WORKSHEET:function(){return"/w/"},"":function(){return"/"}})};function ne(e){var t=(0,J.useRouter)(),n=(0,H.aC)(),o=n.isLoggedIn,s=n.isSubscribed,l=e.isDisabled,c=e.missionTitle,d=e.missionDescription,m=e.missionType,g=e.isUserCanSeeMission,R=e.isLoading,_=e.shouldForceSeeFreeContent,E=(0,Y.Z)(e,["isDisabled","missionTitle","missionDescription","missionType","isUserCanSeeMission","isLoading","shouldForceSeeFreeContent"]),h=(0,H.$G)(),S=(0,f.useState)("NONE"),b=S[0],x=S[1],C=(0,f.useState)("/"),w=C[0],T=C[1];(0,f.useEffect)((function(){x(_?"NONE":o?R?"LOADING":!o||s||g||R?"NONE":"NEEDPREMIUM":"NEEDLOGGEDIN")}),[o,R,g,s,_]),(0,f.useEffect)((function(){if(o&&t&&t.isReady){var e=window&&t&&t.isReady&&t.pathname,n=te(ee(e)),i=te(m),r=t.asPath.replace(n,i);ee(e)!==m&&(x("WRONGURL"),T(r))}}),[t,o,s]);var y=(0,v.default)().publicRuntimeConfig;return(0,a.jsx)(u.Ug,(0,r.Z)((0,i.Z)({paddingX:{base:0,xl:"54px"},w:"100%",as:"article",alignItems:"flex-start"},E),{children:l||"NONE"===b?E.children:(0,a.jsx)(u.gC,{w:"100%",h:"100%",bg:"white",alignItems:"center",justifyContent:"flex-start",minH:{base:"calc(100vh - 210px)",xl:"100%"},px:"4",children:(0,a.jsx)($.b,{labels:{needLoginTitle:h.t("component:journey.guard.needLoginTitle"),needLoginSubtitle:"",loginAction:h.t("component:journey.guard.loginAction"),premiumTitle:h.t("component:journey.guard.premiumTitle"),premiumSubtitle:"",premiumAction:h.t("component:journey.guard.premiumAction"),wrongurlTitle:h.t("component:journey.guard.wrongurlTitle"),wrongurlSubtitle:h.t("component:journey.guard.wrongurlSubtitle"),wrongurlAction:h.t("component:journey.guard.wrongurlAction")},missionTitle:c,missionDescription:d,missionType:m,onActionClick:function(){return(0,p.w6)(b)({LOADING:function(){window.location.href=window.location.origin},NEEDLOGGEDIN:function(){(0,z.L9)({eventType:"rubelMissionLockClickRegisterLogin",context:{journey_serial:E.meta.subtopicSerial,mission_serial:E.meta.missionSerial}}),window.location.href="".concat(window.location.origin,"/login")},NEEDPREMIUM:function(){(0,z.L9)({eventType:"rubelMissionLockClickSubscribe",context:{journey_serial:E.meta.subtopicSerial,mission_serial:E.meta.missionSerial}});var e="".concat(window.location.origin,"/").concat(y.basePath,"/redirect-with-ott?target=").concat(encodeURIComponent(y.paymentUrl));window.location.href=e},WRONGURL:function(){return window.location.href="/".concat(y.basePath).concat(w)}})},state:b})})}))}var ie=n(98235),re=n(85470),oe=n(66752);function ae(e){var t,n,o,s=e.subtopicSerial,u=e.courseSerial,l=e.curriculumSerial,c=e.gradeSerial,d=e.topicSerial,p=e.onPreventRedirection,v=e.countryConfig,m=(0,Y.Z)(e,["subtopicSerial","courseSerial","curriculumSerial","gradeSerial","topicSerial","onPreventRedirection","countryConfig"]),g=(0,H.aC)().isLoggedIn,f=null!==(o=m.missionsQuery)&&void 0!==o?o:(0,oe.bJ)({subtopicSerial:s,courseSerial:u,curriculumSerial:l},{enabled:g}),R=null===(n=null===(t=m.missions)||void 0===t?void 0:t.find((function(e){return e.serial===m.activeMissionSerial})))||void 0===n?void 0:n.missionType,_=function(e){(0,z.L9)({eventType:"rubelEndQuiz",context:{curriculum_serial:l,grade_serial:c,subject_serial:u,topic_serial:d,subtopic_serial:s,mission_serial:e}})};if(f.isLoading)return(0,a.jsx)(ie.i,{});if(f.isSuccess&&f.data.missions.length>0){var E=(0,r.Z)((0,i.Z)({},m),{missions:f.data.missions});return(0,a.jsx)(re.f,(0,r.Z)((0,i.Z)({},E),{onClickWorksheet:function(e){"WORKSHEET"!==R&&(0,z.L9)({eventType:"rubelMissionViewClickPdfMission",context:{curriculum_serial:l,subject_serial:u,topic_serial:d,subtopic_serial:s,mission_serial:e}})},onClickEndQuiz:function(e){_(e)},onClickEndSummary:function(e){"END_SUMMARY"!==R&&(0,z.L9)({eventType:"rubelMissionEndSummaryClicked",context:{curriculum_serial:l,grade_serial:c,subject_serial:u,topic_serial:d,subtopic_serial:s,mission_serial:e}})},onClickMission:function(e){var t,n,i=null===(n=null===(t=m.missions)||void 0===t?void 0:t.find((function(e){return e.serial===m.activeMissionSerial})))||void 0===n?void 0:n.missionType;p||("END_QUIZ"===i?_(e):(0,z.L9)({eventType:"rubelMissionMissionClicked",context:{curriculum_serial:l,grade_serial:c,subject_serial:u,topic_serial:d,subtopic_serial:s,mission_serial:e}}))},onPreventRedirection:p,isLoggedIn:g,countryConfig:v}))}return f.isError||!g?(0,a.jsx)(re.f,(0,r.Z)((0,i.Z)({},m),{onPreventRedirection:p,countryConfig:v})):(0,a.jsx)(ie.i,{})}var se=n(50334);function ue(e){var t=e.courseSerial,n=e.topicSerial,i=e.journeySerial,r=e.missionSerial,o=e.curriculumSerial,s=e.labels,c=(0,oe.pq)({courseSerial:t,topicSerial:n,journeySerial:i,missionSerial:r,curriculumSerial:o}),d=c.isFetched,p=c.data;return(0,a.jsx)(u.xu,{w:"100%",minH:"100vh",pb:0,children:(0,a.jsx)(l.Od,{isLoaded:d,height:{base:"200px",xl:"320px"},children:d&&p&&(0,a.jsx)(u.xu,{w:"100%",children:(0,a.jsx)(se.n,{labels:s,currentTopicTitle:p.currentMission.topicTitle,nextMission:{missionTitle:p.nextMission.missionTitle,slug:p.nextMission.slug,thumbnailURL:p.nextMission.thumbnailURL,topicTitle:p.nextMission.topicTitle,timer:p.nextMission.timer,type:p.nextMission.type},onClose:e.onTransitionClose,endQuiz:p.endQuiz,endSummary:p.endSummary})})})})}var le=n(94364),ce=function(e){var t=(0,H.$G)(),n={title:e.step.title,description:e.step.content,steps:t.t("component:kurikulum_merdeka_coachmark.step",{index:e.index+1,total_steps:e.size}),next:e.isLastStep?t.t("component:kurikulum_merdeka_coachmark.close"):t.t("component:kurikulum_merdeka_coachmark.next"),skip:t.t("component:kurikulum_merdeka_coachmark.skip")};return(0,a.jsx)(u.xu,(0,r.Z)((0,i.Z)({id:"coach-mark-tooltip-container"},e.tooltipProps),{children:(0,a.jsx)(le.e,{isLastStep:e.isLastStep,onClickNext:function(t){e.primaryProps.onClick(t)},onClose:function(t){e.skipProps.onClick(t)},labels:(0,i.Z)({},n)})}))},de=(n(64335),n(1566)),pe=n(5069);function ve(e){var t=e.labels,n=e.onClick,i=e.onClose,r=e.withExitButton,o=void 0!==r&&r;return(0,a.jsxs)(c.bZ,{fontSize:{base:"12px",md:"14px"},borderRadius:"12px",colorScheme:"blue.20",color:"cloudy.80",w:"100%",justifyContent:"space-between",children:[(0,a.jsx)(u.xu,{display:"flex",flexWrap:"wrap",gap:"4px",children:(0,a.jsxs)(u.xu,{display:"flex",gap:"4px",children:[(0,a.jsx)(c.zM,{color:"blue.80",fontSize:"16px"}),(0,a.jsxs)(c.X,{display:"flex",flexWrap:"wrap",columnGap:"4px",children:[(null===t||void 0===t?void 0:t.mainDescription)&&(0,a.jsx)(de.k,{content:t.mainDescription}),(0,a.jsxs)(u.Ug,{flexWrap:"wrap",columnGap:"4px",rowGap:0,spacing:0,children:[(0,a.jsx)(c.X,{children:t.description}),(0,a.jsx)(c.Cd,{onClick:n,cursor:"pointer",color:"seagreen.80",children:t.ctaText})]})]})]})}),o&&(0,a.jsx)(u.xu,{alignSelf:"flex-start",cursor:"pointer",onClick:i&&i,children:(0,a.jsx)(pe.T,{})})]})}var me=function(e){var t=e.trackerPayload,n=e.labels,i={class_serial:t.classSerial,class_name:t.className,curriculum_serial:t.curriculumSerial,curriculum_name:t.curriculumName,is_subscribed:t.isSubscribed};return(0,a.jsx)(ve,{withExitButton:e.withExitButton,labels:{mainDescription:n.mainDescription,description:n.description,ctaText:n.ctaText},onClose:function(){e.onClose();var t=function(e){var t="";switch(e){case z.Sd:t="clickCloseIconRubelHomepage";break;case z.E$:t="clickCloseIconGradeHomepage"}return t}(e.pageType);(0,z.L9)({eventType:t,context:i})},onClick:function(){e.onClick();var t=function(e){var t="";switch(e){case z.Sd:t="clickChangeCurriculumOnRubelHomepage";break;case z.E$:t="clickChangeCurriculumOnGradeHomepage";break;case z.eI:t="clickKurikulumMerdekaInformationDetail"}return t}(e.pageType);(0,z.L9)({eventType:t,context:i})}})},ge=n(714),fe=n(66225),Re=function(e){var t=e.hasPadding,n=void 0===t||t,i=(0,f.useState)([]),r=i[0],s=i[1],l=(0,f.useState)([]),c=l[0],d=l[1],p=function(t){var n=document.getElementById(e.id),i=n?n.getBoundingClientRect().width:0,r=i>0&&c.length>0?i/c.length:0;n&&n.scrollTo({left:"backward"===t?n.scrollLeft-r:n.scrollLeft+r,behavior:"smooth"})},v=function(){var t=function(){var t=document.getElementById(e.id),n=[];if(t){var i=t.getBoundingClientRect().width,r=t.children,o=0,a=[];Array.from(r).forEach((function(e){(o+=e.getBoundingClientRect().width)>=i?(o=e.getBoundingClientRect().width,n.push(a),a=[e.getAttribute("id")]):a.push(e.getAttribute("id"))})),a.length>0&&n.push(a)}return n}();t.length>0&&d((0,o.Z)(t))};(0,f.useEffect)((function(){var t=document.getElementById(e.id);if(t)if(c.length>1&&e.activeChipSerial){var n=function(){var t=r.find((function(t){return t.chipSerial==="chip-".concat(e.activeChipSerial)}));return t?t.scrollLeft:0}();t.scrollTo({left:n,behavior:"smooth"})}else t.scrollLeft=0}),[e.activeChipSerial]);var m=function(){var t=document.getElementById(e.id),n=window.innerWidth,i=t?(n-t.getBoundingClientRect().width)/2:0;if(t){t.scrollLeft=0;var r=Array.from(t.children).map((function(e){return{chipSerial:e.getAttribute("id"),scrollLeft:e.getBoundingClientRect().left-(i>0?i:12)}}));s((0,o.Z)(r))}},g=function(e){m(),v()},R=function(t){var n=document.getElementById(e.id),i=document.getElementById("".concat(e.id,"-arrow-left")),r=document.getElementById("".concat(e.id,"-arrow-right")),o="#2EB5C0",a="grey";if(n&&i&&r){var s=n.getBoundingClientRect().width,u=n.scrollLeft;u>=n.scrollWidth-s-1?(r.style.cursor="not-allowed",r.lastElementChild.setAttribute("fill",a)):(r.style.cursor="pointer",r.lastElementChild.setAttribute("fill",o)),0===u?(i.style.cursor="not-allowed",i.lastElementChild.setAttribute("fill",a)):(i.style.cursor="pointer",i.lastElementChild.setAttribute("fill",o))}};return(0,f.useEffect)((function(){var t=document.getElementById(e.id);return e.chipItems.length>1&&(m(),v(),function(){var t=document.getElementById("".concat(e.id,"-arrow-left"));t&&t.lastElementChild.setAttribute("fill","grey")}(),window.addEventListener("resize",g),t&&t.addEventListener("scroll",R)),function(){window.removeEventListener("resize",g),t&&t.removeEventListener("scroll",R)}}),[e.chipItems]),(0,a.jsxs)(u.Ug,{display:e.chipItems.length<=1||e.debouncedSearchKeyword.length>0?"none":"flex",w:"100%",justifyContent:"center",bg:"transparent",children:[(0,a.jsx)(ge.t,{id:"".concat(e.id,"-arrow-left"),onClick:function(){return p("backward")},as:"button",fontSize:"36px",cursor:"not-allowed",display:{md:"none",lg:c.length>1?"block":"none"}}),(0,a.jsx)(u.W2,{centerContent:!0,maxW:"container.lg",px:n?"".concat(12,"px"):0,children:(0,a.jsx)(fe.Z,{id:e.id,hasPadding:n,items:e.chipItems,activeItemSerial:e.activeChipSerial,onClick:e.onClickChip})}),(0,a.jsx)(ge.t,{id:"".concat(e.id,"-arrow-right"),onClick:function(){return p("forward")},transform:"rotate(180deg)",as:"button",fontSize:"36px",cursor:"pointer",display:{md:"none",lg:c.length>1?"block":"none"}})]})},_e=n(29628)},9900:function(e,t,n){n.d(t,{im:function(){return E},Ai:function(){return L},ac:function(){return _}});var i=n(70865),r=n(96670),o=n(52322),a=n(26106),s=n(64033),u=n(65818),l=n(2784),c=n(62876),d=n(36338),p=n(81615),v=n(76313),m=n(86083),g=n(59620),f=n(92467),R=(0,n(44679).Z)((function(e){return{page:1,setPage:function(t){e({page:t})}}})),_=(0,f.Z)(R),E=function(e){var t=_(),n=(0,d.e)(),l=n.isTablet,f=n.isDesktop,R=(0,g.$G)(),E=0===e.imageList.length&&e.numOfSummary>0,h=l||f,S={templateColumns:{base:"repeat(auto-fill, 1fr)",md:"repeat(auto-fill, 178px)"},gap:6,px:{base:"0px",xl:"20px"}};return(0,o.jsxs)(s.gC,{alignItems:"stretch",position:"relative",minH:{base:"calc(100vh - ".concat(200,"px)")},spacing:"12px",px:{base:"12px",md:"40px"},pt:{base:"12px"},pb:{base:"100px"},children:[h&&(0,o.jsx)(s.xv,{textStyle:(0,p.m)("title-l"),children:R.t("page:end_summary.index_title")}),(0,o.jsx)(v.y,{title:R.t("page:end_summary.download_card.title"),subtitle:R.t("page:end_summary.download_card.subtitle"),ariaLabel:R.t("page:end_summary.download_card.title"),onDownload:e.onClickDownload}),e.onClickRefetchBecauseError&&function(n,l){return l?(0,o.jsx)(a.zx,{onClick:l,variant:"secondary",children:R.t("global:error_try_again")}):n?(0,o.jsx)(s.rj,(0,r.Z)((0,i.Z)({},S),{children:Array(e.numOfSummary).fill(0).map((function(e,t){return(0,o.jsx)(u.Od,{borderRadius:"8px",children:(0,o.jsx)(s.P4,{h:"178px",borderRadius:"8px",boxShadow:"0px 8px 16px rgba(129, 134, 142, 0.08)",overflow:"hidden",cursor:"pointer"})},t)}))})):(0,o.jsx)(s.rj,(0,r.Z)((0,i.Z)({},S),{children:e.imageList.map((function(n,a){return(0,o.jsx)(s.P4,{h:"178px",onClick:function(){return function(n){t.setPage(n+1),e.onClickGoToScrollable()}(a)},borderRadius:"8px",boxShadow:"0px 8px 16px rgba(129, 134, 142, 0.08)",overflow:"hidden",cursor:"pointer",children:(0,o.jsx)(c.E,(0,r.Z)((0,i.Z)({},n),{variant:"fill"}))},n.key)}))}))}(E,e.onClickRefetchBecauseError),""!==e.endQuizSlug&&(0,o.jsx)(s.xu,{position:{base:"fixed",lg:"absolute"},bottom:"0",left:"0",right:"0",children:(0,o.jsx)(m.i,{onClickFinalQuiz:e.onClickFinalQuiz,actionButtonLabel:R.t("page:end_summary.bottom_nav.do_end_quiz")})})]})},h=n(26297),S=n(87394),b=n(71974),x=n(51637),C=n(91583),w=function(e){var t=e.index,n=e.onImageView,a=e.wrapperProps,u=(0,h.Z)(e,["index","onImageView","wrapperProps"]),c=(0,S.Z)((0,b.ac)("(min-height: 500px)"),1)[0],d=(0,x.ZP)({threshold:c?.5:.25}),p=d.observe,v=d.inView;return(0,l.useEffect)((function(){v&&n(t)}),[v]),(0,o.jsx)(s.xu,(0,r.Z)((0,i.Z)({},a),{minH:{base:"600px"},h:{md:"800px"},ref:p,children:(0,o.jsx)(C.O,(0,i.Z)({},u))}))},T=n(33078),y=n(1433),N=n(53847);var A=function(e){var t=(0,l.useState)(60),n=t[0],i=t[1],r=(0,g.$G)();return(0,o.jsx)(s.aV,{spacing:"0",children:e.imageList.map((function(t,a){return(0,o.jsx)(s.HC,{children:(0,o.jsx)(w,{zoomLevel:n,onChangeZoomLevel:function(e){i(e)},wrapperProps:{id:"summary-".concat(a+1)},index:a,imageSrc:t.src,imageAlt:t.alt,onImageView:e.handleImageView,ariaLabels:{zoomIn:r.t("component:image_viewer.zoom_in"),zoomOut:r.t("component:image_viewer.zoom_out")}})},t.src)}))})},L=function(e){var t=_(),n=(0,d.e)(),i=n.isTablet,r=n.isDesktop,u=(0,g.$G)(),c=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1];return(0,l.useEffect)((function(){var e=function(){return n(!0)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),t}(),v=t.page-1,m=e.imageList[v];(0,l.useEffect)((function(){if(1!==t.page){var e=document.getElementById("summary-".concat(t.page));e&&e.scrollIntoView()}}),[]);var f=i||r,R=e.imageList.length,E=function(){switch(e.imageList.length>0?e.imageList[v].likeStatus:null){case 1:return"liked";case-1:return"disliked";default:return"none"}}();return(0,o.jsx)(s.xu,{pt:{base:"0px",md:"12px"},minH:"100vh",children:(0,o.jsxs)(s.xu,{position:"relative",bg:"white",borderRadius:"16px",px:{base:"0px",md:"20px",xl:"0px"},children:[f&&(0,o.jsxs)(s.kC,{padding:"12px",alignItems:"center",justifyContent:"space-between",children:[(0,o.jsxs)(s.Ug,{children:[(0,o.jsx)(a.hU,{variant:"unstyled",icon:(0,o.jsx)(T.x,{fontSize:18}),"aria-label":u.t("page:end_summary.scrollable_back_button"),onClick:e.onClickBack}),(0,o.jsx)(s.xv,{textStyle:(0,p.m)("title-l"),children:u.t("page:end_summary.index_title")})]}),(0,o.jsx)(y.f,{onClick:function(){e.onClickReport()},children:u.t("component:report.buttonText")})]}),(0,o.jsx)(s.xu,{px:{base:"0px",md:"20px",xl:"36px"},children:(0,o.jsx)(A,{imageList:e.imageList,handleImageView:function(e){c&&t.setPage(e+1)}})}),(0,o.jsx)(s.xu,{position:"sticky",bottom:"0px",bg:"white",zIndex:2,children:(0,o.jsx)(N.X,{page:t.page,totalPages:R,onClickLike:function(){e.onClickLike(m.key,m.likeStatus)},onClickDislike:function(){e.onClickDislike(m.key,m.likeStatus)},onClickDownload:e.onClickDownload,status:E,ariaLabels:{like:u.t("page:end_summary.bottom_nav.like"),dislike:u.t("page:end_summary.bottom_nav.dislike"),download:u.t("page:end_summary.bottom_nav.download")}})})]})})}},29628:function(e,t,n){n.d(t,{VS:function(){return G},jL:function(){return X},qq:function(){return O},zc:function(){return ne}});n(9900);var i=n(98788),r=n(70865),o=n(96670),a=n(50930),s=n(94776),u=n.n(s),l=n(52322),c=n(81382),d=n(64033),p=n(65818),v=n(2784),m=n(93571),g=n(93755),f=n(25543),R=n(14383),_=n(21553),E=n(6448),h=n(58827),S=n(30891),b=n(63550),x=n(66752),C=n(28160),w=n(83518),T=n(76119),y=n(5347),N=n(43394);function A(e){var t=e.currentQuestion,n=e.totalSeconds,i=e.retry,r=e.buttonText,o=e.appInfo,a=e.toastAnimationType,s=function(e){return Math.floor(Math.random()*e)},u=(0,v.useMemo)((function(){return function(){var e,i,r,a,u,l={title:"",description:""},c=o.contentInfo.quiz_answer_message,d=c.options_with_description,p=c.slow_duration;return t.isCorrect?n<p?null!==(e=d.correct_fast[s(d.correct_fast.length)])&&void 0!==e?e:l:null!==(i=d.correct_slow[s(d.correct_slow.length)])&&void 0!==i?i:l:t.retry>0?null!==(r=d.wrong_retry[s(d.wrong_retry.length)])&&void 0!==r?r:l:n<p?null!==(a=d.wrong_fast[s(d.wrong_fast.length)])&&void 0!==a?a:l:null!==(u=d.wrong_slow[s(d.wrong_slow.length)])&&void 0!==u?u:l}()}),[t]);return(0,v.useMemo)((function(){return(0,l.jsx)(N.Q,{onClick:function(){i()},toastAnimationType:a,toastState:t.isCorrect?"CORRECT":"INCORRECT",title:u.title,description:u.description,label:{buttonText:r}})}),[a,t])}var L=n(59620);function O(e){var t,n,s,N=(0,v.useState)(),O=N[0],j=N[1],P=(0,v.useState)({show:!1,isTopNavigationDisabled:!1}),M=P[0],U=P[1],q=(0,c.pm)(),Q=e.meta,V=e.appInfo,G=e.labels,z=e.quizPageState,B=e.submissionSerial,W=e.reportLoading,H=e.questions,F=e.questionsetSerial,X=e.toggleQuizPageState,K=e.handleSubmitReport,Y=(0,L.aC)().profile,J=(0,T.w7)(),$=function(){var e;return(0,T.TO)(null!==(t=null===(e=J.currentUrl)||void 0===e?void 0:e.pathname)&&void 0!==t?t:"")},ee=(0,v.useRef)((new Date).getTime()),te=function(){return{user_quiz_view_id:"".concat(null===Y||void 0===Y?void 0:Y.userCode,"|").concat((0,T._7)(),"|").concat(ee.current),grade_serial:Q.gradeSerial,curriculum_serial:Q.curriculumSerial,subject_serial:Q.courseSerial,mission_serial:Q.missionSerial,quiz_serial:F}},ne=(0,v.useState)("animationClear"),ie=ne[0],re=ne[1],oe=(0,v.useReducer)(D,(0,o.Z)((0,r.Z)({},I),{currentPage:null!==(n=e.initialPage)&&void 0!==n?n:I.currentPage})),ae=oe[0],se=ae.quizNavigations,ue=ae.questionAnswers,le=ae.currentSelectedOption,ce=ae.currentPage,de=ae.prevPage,pe=ae.startTime,ve=ae.totalSeconds,me=function(e){return{dispatchQuizNavigations:function(t){e({type:k.SET_QUIZ_NAVIGATIONS,value:t})},dispatchQuestionAnswers:function(t){e({type:k.SET_QUESTION_ANSWERS,value:t})},dispatchCurrenSelectedOptions:function(t){e({type:k.SET_CURRENT_SELECTED_OPTION,value:t})},dispatchCurrenPage:function(t){e({type:k.SET_CURRENT_PAGE,value:t})},dispatchStartTime:function(t){e({type:k.SET_START_TIME,value:t})},dispatchTotalSeconds:function(t){e({type:k.SET_TOTAL_SECONDS,value:t})}}}(oe[1]),ge=me.dispatchCurrenPage,fe=me.dispatchCurrenSelectedOptions,Re=me.dispatchQuestionAnswers,_e=me.dispatchQuizNavigations,Ee=me.dispatchStartTime,he=me.dispatchTotalSeconds,Se=ue.length>0?ue[ce-1]:Z,be=(0,w.hl)(),xe=(0,w.Yu)(null!==(s=null===Se||void 0===Se?void 0:Se.serial)&&void 0!==s?s:"",{enabled:!1}),Ce=(0,w.X4)(),we=(0,w.IB)({submissionSerial:B},{enabled:"EXPLANATION"===z}),Te=(0,x.fw)({onSuccess:function(e){Be({activityType:"QUIZ"})},onError:function(e){q({title:"Error",description:"".concat(e._tag,". Try Again."),status:"error"})}}),ye=Te.isLoading,Ne=Te.mutate,Ae=ue.every((function(e){return e.isAnswered}))&&"QUIZ"===z,Le=e.labels.letterOptions.split("");(0,v.useEffect)((function(){if(we.isSuccess&&"EXPLANATION"===z){var e=we.data.userSubmissionExplanations,t=e.map((function(e,t){return{page:t+1,state:e.userSubmissionDetail.isRight?"CORRECT":"INCORRECT"}})),n=e.map((function(e){var t,n,i,r,o,a,s,u,l,c,d;return{content:null===e||void 0===e||null===(t=e.explanation)||void 0===t?void 0:t.content,serial:null===e||void 0===e||null===(n=e.userSubmissionDetail)||void 0===n?void 0:n.questionSerial,answers:null===e||void 0===e||null===(i=e.explanation)||void 0===i?void 0:i.answers.map((function(e){return{contents:e.content}})),previousSelectedOption:[],retry:(null===e||void 0===e||null===(r=e.userSubmissionDetail)||void 0===r?void 0:r.isRight)?0:3,selectedOption:null===e||void 0===e||null===(o=e.userSubmissionDetail)||void 0===o?void 0:o.answer,buttonState:"CHECKED",isCorrect:null===e||void 0===e||null===(a=e.userSubmissionDetail)||void 0===a?void 0:a.isRight,isAnswered:!0,questionExplanation:{correctAnswer:"".concat(G.correctAnswer," ").concat(Le[null===e||void 0===e||null===(s=e.explanation)||void 0===s?void 0:s.answers.findIndex((function(e){return e.rightAnswer}))]),correctAnswerExplanation:null===e||void 0===e||null===(u=e.explanation)||void 0===u?void 0:u.contentDefinition.text,feedback:{correctAnswer:"".concat(G.feedbackSelectedAnswer," ").concat(Le[null===e||void 0===e||null===(l=e.userSubmissionDetail)||void 0===l?void 0:l.answer]),title:(null===e||void 0===e||null===(c=e.userSubmissionDetail)||void 0===c?void 0:c.isRight)?G.feedbackCorrectAnswerTitle:G.feedbackIncorrectAnswerTitle,description:(null===e||void 0===e||null===(d=e.userSubmissionDetail)||void 0===d?void 0:d.isRight)?G.feedbackCorrectAnswerMotivation:G.feedbackIncorrectAnswerMotivation,right:G.right,wrong:G.wrong}}}}));_e(t),Re(n),Ie(!0)}}),[we.isSuccess]),(0,v.useEffect)((function(){if("QUIZ"===z&&H){j(new Date);var e=H.map((function(e,t){return{page:t+1,state:"DEFAULT"}})),t=H.map((function(e){return(0,o.Z)((0,r.Z)({},e),{previousSelectedOption:[],retry:0,selectedOption:void 0,buttonState:"NOT_ANSWERED",isCorrect:void 0,isAnswered:!1,questionExplanation:{correctAnswer:"",correctAnswerExplanation:"",feedback:{correctAnswer:"",title:"",description:"",right:"",wrong:""}}})}));_e(e),Re(t)}}),[H]),(0,v.useEffect)((function(){var e,t,n;re("animationClear"),Ee((new Date).getTime()),Ie(),"INCORRECT_ANSWER"===(null===(e=ue[ce-1])||void 0===e?void 0:e.buttonState)&&(null===(t=ue[ce-1])||void 0===t?void 0:t.retry)>=0&&(null===(n=ue[ce-1])||void 0===n?void 0:n.retry)<3&&setTimeout((function(){re("animationIncorrectAnswer")}),100)}),[ce]);var Oe=function(e){setTimeout((function(){re("animationClear")}),e)},ke=function(){var e=document.getElementById("quiz-explanation-".concat(ce));e&&e.scrollIntoView({behavior:"smooth"})},Ie=function(e){Se.isCorrect||3===Se.retry||e?U({show:!0,isTopNavigationDisabled:!1}):U({show:!1,isTopNavigationDisabled:!1})},De=function(e){re(e?"animationCorrectAnswer":"animationIncorrectAnswer"),(e||3===Se.retry)&&(U({show:!1,isTopNavigationDisabled:!0}),new Promise((function(e){setTimeout((function(){return U({show:!0,isTopNavigationDisabled:!0}),e(!0)}),2500)}))).then((function(e){ke(),U({show:!0,isTopNavigationDisabled:!1})}))},Ze=function(){var t=(0,i.Z)(u().mark((function t(){var n,i,s,l,c,d,p,v,m,g,f,R,_,E,h,S,b,x,C;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=(new Date).getTime(),i=Math.round((n-pe)/1e3),he(i),t.next=7,be.mutateAsync({serial:null!==(s=null===Se||void 0===Se?void 0:Se.serial)&&void 0!==s?s:"",currentAnswerIndex:null!==le&&void 0!==le?le:0});case 7:return l=t.sent,t.next=10,xe.refetch();case 10:c=t.sent,d=c.data,p=c.isSuccess,l&&(u=l.isAnswerRight,(0,T.L9)({eventType:"rubelQuizAnswerQuestion",context:(0,o.Z)((0,r.Z)({},te()),{journey_serial:Q.subtopicSerial,answerResult:u,current_question_num:ce,current_question_serial:Se.serial,total_num_of_question:null===H||void 0===H?void 0:H.length})})),l&&p&&(m=l.isAnswerRight?le:d.answers.findIndex((function(e){return!0===e.right_answer})),g=(0,a.Z)(ue),f=(0,a.Z)(se),R=function(){return 0===g[ce-1].retry&&l.isAnswerRight?[]:g[ce-1].retry<2&&!l.isAnswerRight?g[ce-1].previousSelectedOption.concat(null!==le&&void 0!==le?le:-1):g[ce-1].previousSelectedOption},g[ce-1]=(0,o.Z)((0,r.Z)({},g[ce-1]),{previousSelectedOption:R(),isCorrect:l.isAnswerRight,isAnswered:!0,selectedOption:le,buttonState:l.isAnswerRight?"CHECKED":"INCORRECT_ANSWER",questionExplanation:{correctAnswer:"".concat(G.correctAnswer," ").concat(Le[m]),correctAnswerExplanation:null!==(_=null===d||void 0===d||null===(v=d.content_definition)||void 0===v?void 0:v.text)&&void 0!==_?_:"",feedback:{correctAnswer:"".concat(G.feedbackSelectedAnswer," ").concat(Le[le]),title:l.isAnswerRight?G.feedbackCorrectAnswerTitle:G.feedbackIncorrectAnswerTitle,description:l.isAnswerRight?G.feedbackCorrectAnswerMotivation:G.feedbackIncorrectAnswerMotivation,right:G.right,wrong:G.wrong}}}),f[ce-1].state=l.isAnswerRight?"CORRECT":"INCORRECT",g[ce-1].retry<2||g[ce-1].isCorrect?(De(l.isAnswerRight),e.hasGamification&&(l.isAnswerRight&&Je?(Ke.current&&Ke.current.animate(),$e((0,o.Z)((0,r.Z)({},Je),{totalGold:Je.totalGold+Fe.goldReward,totalXp:Je.totalXp+Fe.xpReward}))):Xe((0,o.Z)((0,r.Z)({},Fe),{xpReward:null!==(x=null===(h=null===(E=e.activityRewardRetry)||void 0===E?void 0:E.find((function(e){return"XP"===e.type})))||void 0===h?void 0:h.value)&&void 0!==x?x:0,goldReward:null!==(C=null===(b=null===(S=e.activityRewardRetry)||void 0===S?void 0:S.find((function(e){return"GOLD"===e.type})))||void 0===b?void 0:b.value)&&void 0!==C?C:0})))):(g[ce-1]=(0,o.Z)((0,r.Z)({},g[ce-1]),{retry:3,buttonState:"CHECKED",isAnswered:!0}),U({show:!0,isTopNavigationDisabled:!1}),ke()),Re(g),_e(f)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.error("[checkAnsweredQuestion]",t.t0);case 20:case"end":return t.stop()}var u}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),je=function(e){return"".concat(e.toISOString().split("T")[0]," ").concat(e.toTimeString().split(" ")[0])},Pe=function(){var e,t,n,i,r,o=ue.map((function(e){var t,n;return{questionSerial:e.serial,questionVersion:null!==(t=e.version)&&void 0!==t?t:0,answer:null!==(n=e.selectedOption)&&void 0!==n?n:-1}}));return{submissions:[{sourceSerial:null!==(e=Q.missionSerial)&&void 0!==e?e:"",questionsetSerial:F,startedAt:je(null!==O&&void 0!==O?O:new Date),submittedAt:je(new Date),userSubmissionDetails:o,courseSerial:null!==(t=Q.courseSerial)&&void 0!==t?t:"",topicSerial:null!==(n=Q.topicSerial)&&void 0!==n?n:"",subtopicSerial:null!==(i=Q.subtopicSerial)&&void 0!==i?i:"",missionSerial:null!==(r=Q.missionSerial)&&void 0!==r?r:""}]}},Me=function(){var e,t,n,i,r;return{gamifications:[{activityDynamicValue:ue.filter((function(e){return 0===e.retry&&e.isCorrect})).length,activitySerial:"".concat(Q.subtopicSerial,"_").concat(Q.missionSerial),activityType:"QUIZ",type:"DYNAMIC"},{activityDynamicValue:ue.filter((function(e){return e.retry>0&&e.isCorrect})).length,activitySerial:"".concat(Q.subtopicSerial,"_").concat(Q.missionSerial),activityType:"QUIZ_RETRY",type:"DYNAMIC"}],journeySerial:null!==(e=Q.subtopicSerial)&&void 0!==e?e:"",missionSerial:null!==(t=Q.missionSerial)&&void 0!==t?t:"",missionType:"QUIZ",subjectSerial:null!==(n=Q.subtopicSerial)&&void 0!==n?n:"",topicSerial:null!==(i=Q.topicSerial)&&void 0!==i?i:"",courseSerial:null!==(r=Q.courseSerial)&&void 0!==r?r:""}},Ue=function(){var e=(0,i.Z)(u().mark((function e(t){var n,i,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null===Se||void 0===Se?void 0:Se.buttonState,Ae?(i=Pe(),Ce.mutate(i,{onSuccess:function(e){Ne(Me())},onError:function(e){console.error("[quizAccomplishedResult]",JSON.stringify(e))}}),(0,T.L9)({eventType:"rubelQuizSubmitQuiz",context:(0,o.Z)((0,r.Z)({},te()),{subtopic_serial:Q.subtopicSerial,entry_point:$(),questions_correct_answered:se.filter((function(e){return"CORRECT"===e.state})).map((function(e){return e.page})),questions_wrong_answered:se.filter((function(e){return"INCORRECT"===e.state})).map((function(e){return e.page})),playlist_serial:""})})):"NOT_ANSWERED"===n||"CHECKED"===n?(s="primary"===t?ce+1:ce-1,Xe(We()),fe(ue[s-1].selectedOption),ge(s),window.scrollTo({top:0})):"ANSWERED"===n?Ze():"INCORRECT_ANSWER"===n&&("primary"===t?(Xe(We()),ge(ce+1),fe(ue[ce].selectedOption)):((0,T.L9)({eventType:"rubelQuizToastWrongAnswerPembahasanClicked",context:(0,o.Z)((0,r.Z)({},te()),{subtopic_serial:Q.subtopicSerial,entry_point:$(),chosen_answer_index:le,current_question_serial:Se.serial,current_question_num:ce,total_num_of_question:null===H||void 0===H?void 0:H.length,playlist_serial:""})}),Oe(0),l=(0,a.Z)(ue),c=l[ce-1].previousSelectedOption.filter((function(e){return e!=le})),l[ce-1]=(0,o.Z)((0,r.Z)({},l[ce-1]),{retry:3,buttonState:"CHECKED",isAnswered:!0,previousSelectedOption:c}),Re(l),new Promise((function(e){return U({show:!0,isTopNavigationDisabled:!1}),e(!0)})).then((function(e){ke()}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=(0,L.dd)(),Qe=qe.open,Ve=qe.close;(0,y.i)((function(e){var t,n,i,a;(0,T.iG)(null!==(n=null===(t=e.currentUrl)||void 0===t?void 0:t.pathname)&&void 0!==n?n:"")&&(0,T.L9)({eventType:"rubelQuizView",context:(0,o.Z)((0,r.Z)({},te()),{journey_serial:Q.subtopicSerial,entry_point:(0,T.TO)(null!==(a=null===(i=e.prevUrl)||void 0===i?void 0:i.pathname)&&void 0!==a?a:""),total_num_of_question:null===H||void 0===H?void 0:H.length,playlist_serial:""})})})),(0,v.useEffect)((function(){H&&(0,T.L9)({eventType:"rubelQuizOpenQuestion",context:(0,o.Z)((0,r.Z)({},te()),{journey_serial:Q.subtopicSerial,current_question_serial:Se.serial,current_question_num:ce,prevQuestion_serial:de?H[de-1].serial:"",prev_question_num:null!==de&&void 0!==de?de:0,total_num_of_question:H.length})})}),[ce]);var Ge,ze,Be=(0,C.M)({onSuccess:function(){X("RESULT")}}).mutate,We=function(){var t,n,i;return{isStart:!1,xpReward:null!==(Ge=null===(n=null===(t=e.activityReward)||void 0===t?void 0:t.find((function(e){return"XP"===e.type})))||void 0===n?void 0:n.value)&&void 0!==Ge?Ge:0,goldReward:null!==(ze=null===(i=null===e||void 0===e?void 0:e.activityReward.find((function(e){return"GOLD"===e.type})))||void 0===i?void 0:i.value)&&void 0!==ze?ze:0}},He=(0,v.useState)(We()),Fe=He[0],Xe=He[1],Ke=(0,v.useRef)(null),Ye=(0,v.useState)(void 0),Je=Ye[0],$e=Ye[1];(0,b.MH)({onSuccess:function(e){$e(e)}});var et,tt,nt,it,rt;return(0,l.jsxs)(d.xu,{width:"100%",minH:"100vh",position:"relative",children:[(be.isLoading||Ce.isLoading||xe.isLoading||ye||W)&&(0,l.jsx)(g.G,{}),(0,l.jsxs)(d.gC,{align:"stretch",my:{base:"15px !important",md:"12px !important"},width:"100%",px:{base:"12px",md:"20px"},children:[M.isTopNavigationDisabled&&(0,l.jsx)(d.xu,{position:"fixed",zIndex:"modal",left:0,top:0,width:"100%",height:"100vh",bg:"transparent"}),(0,l.jsx)(p.Od,{borderRadius:"16px",minH:"58px",isLoaded:!we.isLoading,children:(0,l.jsx)(f.H,{withMaxWidth:!0,quizNavigationBodies:se,currentPage:ce,onClick:function(e){ge(e),fe(ue[e-1].selectedOption)},labels:G.gamification,hasGamificationIcon:e.hasGamification,gamification:Fe,ref:Ke,onClickGamification:function(){Je&&Ke.current&&Ke.current.animateClick(Je.totalGold,Je.totalXp)}})}),(0,l.jsxs)(d.gC,{align:"stretch",children:[(0,l.jsxs)(d.MI,{bg:"white",columns:{base:1,md:1,lg:2},gap:"10px",borderRadius:"16px",p:{base:"12px",md:"16px",lg:"24px"},mb:{base:"72px",md:0},position:"relative",children:[(0,l.jsx)(A,{currentQuestion:Se,totalSeconds:ve,questionAnswers:ue,quizAnswerResult:null!==(et=null===be||void 0===be?void 0:be.data)&&void 0!==et?et:{serial:"",isAnswerRight:!1},buttonText:G.retryButton,retry:function(){(0,T.L9)({eventType:"rubelQuizToastWrongAnswerRetryClicked",context:(0,o.Z)((0,r.Z)({},te()),{subtopic_serial:Q.subtopicSerial,entry_point:$(),chosen_answer_index:le,current_question_serial:Se.serial,current_question_num:ce,total_num_of_question:null===H||void 0===H?void 0:H.length,playlist_serial:""})});var e=(0,a.Z)(ue);e[ce-1]=(0,o.Z)((0,r.Z)({},e[ce-1]),{retry:e[ce-1].retry+1,isAnswered:!1,buttonState:"NOT_ANSWERED"}),re("animationFadeOut"),Oe(500),Re(e)},appInfo:V,toastAnimationType:ie}),we.isLoading?(0,l.jsx)(p.Od,{borderRadius:"16px",h:"500px"}):(0,l.jsx)(R.k,{alignSelf:"flex-start",title:G.questionPassageTitle,content:null!==(tt=null===Se||void 0===Se?void 0:Se.content)&&void 0!==tt?tt:""}),(0,l.jsxs)(d.gC,{align:"stretch",children:[(0,l.jsx)(p.Od,{borderRadius:"16px",isLoaded:!we.isLoading,minH:"250px",children:(0,l.jsx)(_.bg,{retry:Se.retry,previousSelectedAnswer:Se.retry>0&&Se.retry<=3?Se.previousSelectedOption:void 0,isCorrect:null===Se||void 0===Se?void 0:Se.isCorrect,isAnswered:null===Se||void 0===Se?void 0:Se.isAnswered,answerOptions:null!==(nt=null===Se||void 0===Se?void 0:Se.answers)&&void 0!==nt?nt:[],currentSelectedOption:"EXPLANATION"===z?null!==(it=null===Se||void 0===Se?void 0:Se.selectedOption)&&void 0!==it?it:-1:void 0!==(null===Se||void 0===Se?void 0:Se.selectedOption)&&null!==(null===Se||void 0===Se?void 0:Se.selectedOption)&&(null===Se||void 0===Se?void 0:Se.isCorrect)?null!==(rt=null===Se||void 0===Se?void 0:Se.selectedOption)&&void 0!==rt?rt:-1:null!==le&&void 0!==le?le:-1,onClick:function(e){var t=(0,a.Z)(ue);t[ce-1]=(0,o.Z)((0,r.Z)({},t[ce-1]),{buttonState:"ANSWERED"}),fe(e),Re(t)},letterOptions:e.labels.letterOptions})}),(0,l.jsx)(E.i,{labels:{text:G.report.mainLabel,buttonText:G.report.mainButtonText},onReportClick:function(){Qe((0,l.jsx)(m.k,{radioOptionList:V.contentInfo.quiz_report.options,isLoading:!1,onCancel:function(){return Ve()},labels:G.report,onSubmit:function(e){var t,n=e.radioValue,i=e.textareaValue;Ve(),K({questionSerial:Se.serial,questionVersion:null!==(t=Se.version)&&void 0!==t?t:0,reason:"".concat(n).concat(i?"|".concat(i):"")})}}))}}),we.isLoading&&(0,l.jsx)(p.Od,{borderRadius:"16px",minH:"700px"}),M.show&&(0,l.jsx)(h.G,(0,r.Z)({currentPage:ce,label:{mainText:G.explanationMainTitle},state:Se.isCorrect?"CORRECT":"INCORRECT"},Se.questionExplanation))]})]}),(0,l.jsx)(p.Od,{borderRadius:"16px",isLoaded:!we.isLoading,children:(0,l.jsx)(S.w,{position:{base:"fixed",md:"static"},width:"100%",bottom:0,left:0,firstQuestion:1===ce,lastQuestion:ce===ue.length,buttonState:Ae?"ALL_QUESTIONS_ANSWERED":null===Se||void 0===Se?void 0:Se.buttonState,primaryOnClick:function(){Ue("primary")},secondaryOnClick:function(){return Ue("secondary")},labels:{previousButton:G.previousButton,nextButton:G.nextButton,checkAnswerButton:G.checkAnswerButton,submitQuizButton:G.submitQuizButton,seeExplanationButton:G.seeExplanationButton}})})]})]})]})}var k,I={quizNavigations:[],questionAnswers:[],currentSelectedOption:void 0,currentPage:1,prevPage:null,startTime:0,totalSeconds:0};function D(e,t){switch(t.type){case"SET_QUIZ_NAVIGATIONS":return(0,o.Z)((0,r.Z)({},e),{quizNavigations:t.value});case"SET_QUESTION_ANSWERS":return(0,o.Z)((0,r.Z)({},e),{questionAnswers:t.value});case"SET_CURRENT_SELECTED_OPTION":return(0,o.Z)((0,r.Z)({},e),{currentSelectedOption:t.value});case"SET_CURRENT_PAGE":return(0,o.Z)((0,r.Z)({},e),{prevPage:e.currentPage,currentPage:t.value});case"SET_START_TIME":return(0,o.Z)((0,r.Z)({},e),{startTime:t.value});case"SET_TOTAL_SECONDS":return(0,o.Z)((0,r.Z)({},e),{totalSeconds:t.value});default:return(0,r.Z)({},e)}}!function(e){e.SET_QUIZ_NAVIGATIONS="SET_QUIZ_NAVIGATIONS",e.SET_QUESTION_ANSWERS="SET_QUESTION_ANSWERS",e.SET_CURRENT_SELECTED_OPTION="SET_CURRENT_SELECTED_OPTION",e.SET_CURRENT_PAGE="SET_CURRENT_PAGE",e.SET_START_TIME="SET_START_TIME",e.SET_TOTAL_SECONDS="SET_TOTAL_SECONDS"}(k||(k={}));var Z={previousSelectedOption:[],retry:0,selectedOption:void 0,buttonState:"NOT_ANSWERED",serial:"",isCorrect:!1,isAnswered:!1,content:"",questionExplanation:{correctAnswer:"",correctAnswerExplanation:"",feedback:{correctAnswer:"",title:"",description:"",right:"",wrong:""}},answers:[]};var j=n(28879),P=n.n(j),M=n(89945),U=n.n(M),q=n(5632),Q=n(91570),V=n(78685);P().extend(U());function G(e){var t,n,i,a,s,u=(0,L.aC)().profile,c=(0,v.useRef)((new Date).getTime()),p=(0,T.w7)(),g=function(){return{user_endquiz_view_id:"".concat(u.userCode,"|").concat((0,T._7)(),"|").concat(c.current),grade_serial:e.meta.gradeSerial,grade_name:e.meta.gradeName,curriculum_serial:e.meta.curriculumSerial,curriculum_name:e.meta.curriculumName,subject_serial:e.meta.courseSerial,journey_serial:e.meta.subtopicSerial,mission_serial:e.meta.missionSerial,playlist_serial:"",end_quiz_serial:e.questionSetSerial}},S=function(){var e;return(0,T.TO)(null!==(s=null===(e=p.prevUrl)||void 0===e?void 0:e.pathname)&&void 0!==s?s:"")},b=function(t){var n=e.labels.letterOptions.split("");return t>-1?n[t]:"-"},x=e.labels,C=(0,v.useReducer)((function(e,t){switch(t.type){case"SET_ANSWER":return(0,o.Z)((0,r.Z)({},e),{unansweredNumbers:e.unansweredNumbers.filter((function(e){return e!==(t.payload.questionIndex+1).toString()})),answers:e.answers.map((function(e){return e.questionSerial===t.payload.questionSerial?(0,o.Z)((0,r.Z)({},e),{answer:t.payload.answerIndex}):e}))});case"INIT_QUESTIONS_ANSWERS":return(0,o.Z)((0,r.Z)({},e),{startedAt:P()().format("YYYY-MM-DD HH:mm:ss"),questions:t.payload.questions,answers:t.payload.answers,unansweredNumbers:t.payload.answers.map((function(e,t){return(t+1).toString()}))});case"SET_ACTIVE_QUESTION_INDEX":return(0,o.Z)((0,r.Z)({},e),{activeQuestionIndex:t.payload});case"SET_STARTED_AT":return(0,o.Z)((0,r.Z)({},e),{startedAt:t.payload});case"SET_MODAL":return(0,o.Z)((0,r.Z)({},e),{modal:t.payload});default:return(0,r.Z)({},e)}}),{answers:[],activeQuestionIndex:0,startedAt:"",modal:"none",unansweredNumbers:[],questions:[]}),w=C[0],y=C[1];(0,v.useEffect)((function(){e.explanations.length>0&&e.withExplanation?y({type:"INIT_QUESTIONS_ANSWERS",payload:{questions:e.explanations.map((function(e){return{serial:e.questionSerial,content:e.content,answers:e.answers.map((function(e){return{contents:e.content}})),version:e.questionVersion,contentDefinition:e.contentDefinition.text}})),answers:e.explanations.map((function(e){var t,n;return{answer:e.answer,questionSerial:e.questionSerial,isRight:!!e.isRight,questionVersion:e.questionVersion,correctAnswerRank:null!==(n=null===(t=e.answers.find((function(e){return e.rightAnswer})))||void 0===t?void 0:t.rank)&&void 0!==n?n:-1}}))}}):y({type:"INIT_QUESTIONS_ANSWERS",payload:{questions:e.questions,answers:e.questions.map((function(e){var t;return{answer:-1,questionSerial:e.serial,isRight:null,questionVersion:null!==(t=e.version)&&void 0!==t?t:0,correctAnswerRank:-1}}))}})}),[e.questions,e.withExplanation]);var N=(0,L.UT)(),A=N.addWindowUnloadListener,O=N.removeWindowUnloadListener;(0,v.useEffect)((function(){return A(),function(){return O()}}),[]);var k=(0,q.useRouter)(),I=(0,L.dd)(),D=I.open,Z=I.close;(0,v.useEffect)((function(){return k.beforePopState((function(t){return t.as!==k.asPath&&0!==e.questions.length&&D("leaveEndQuizAlertModal"),!0})),function(){k.beforePopState((function(){return!0}))}}),[k]),(0,v.useEffect)((function(){0===e.questions.length&&D("availableAppOnly",{onClickPrimaryButton:function(){return k.back()},isCloseable:!1})}),[]);var j=function(){Z(),(0,T.L9)({eventType:"rubelEndQuizEnded",context:(0,o.Z)((0,r.Z)({},g()),{current_question_serial:w.questions[w.activeQuestionIndex].serial,current_question_num:w.activeQuestionIndex+1,total_num_questions:w.questions.length,entry_point:S()})});var t=w.answers.map((function(e){return{questionSerial:e.questionSerial,questionVersion:e.questionVersion,answer:e.answer}}));e.handleSubmitEndQuiz({userSubmissions:t,startedAt:w.startedAt,submittedAt:P()().format("YYYY-MM-DD HH:mm:ss"),questionSetSerial:e.questionSetSerial})};(0,T.q8)((function(e){var t,n,i,a,s;(0,T.gz)(null!==(n=null===(t=e.currentUrl)||void 0===t?void 0:t.pathname)&&void 0!==n?n:"")&&w.questions.length>0&&(0,T.L9)({eventType:"rubelEndQuizOpenQuestion",context:(0,o.Z)((0,r.Z)({},g()),{total_num_questions:w.questions.length,current_question_serial:(null===(i=w.questions[w.activeQuestionIndex])||void 0===i?void 0:i.serial)||"",entry_point:(0,T.TO)(null!==(s=null===(a=e.prevUrl)||void 0===a?void 0:a.pathname)&&void 0!==s?s:"")})})}),[w.questions]);var M;return(0,l.jsx)(l.Fragment,{children:w.questions.length>0&&(0,l.jsxs)(d.gC,{align:"stretch",marginTop:{base:"15px !important",md:"12px !important"},width:"100%",px:{base:"12px",md:"20px",lg:"40px"},children:[(0,l.jsx)(f.H,{withMaxWidth:!1,quizNavigationBodies:(M=w.answers,M.map((function(e,t){return{page:t+1,state:null===e.isRight?-1===e.answer?"DEFAULT":"ANSWERED":e.isRight?"CORRECT":"INCORRECT"}}))),currentPage:w.activeQuestionIndex+1,onClick:function(e){y({type:"SET_ACTIVE_QUESTION_INDEX",payload:e-1})}}),(0,l.jsxs)(d.gC,{bg:"transparent",align:"stretch",pb:"50px",children:[(0,l.jsxs)(d.MI,{bg:"white",columns:{base:1,xl:2},gap:"10px",borderRadius:"16px",border:"1px solid #DADFEA",p:{base:"12px",md:"16px",lg:"24px"},mb:{base:"72px",md:0},children:[(0,l.jsx)(R.k,{alignSelf:"flex-start",title:e.labels.questionPassageTitle,content:null===(t=w.questions[w.activeQuestionIndex])||void 0===t?void 0:t.content}),(0,l.jsxs)(d.gC,{align:"stretch",children:[(0,l.jsx)(_.bg,{isCorrect:!!(null===(n=w.answers[w.activeQuestionIndex])||void 0===n?void 0:n.isRight),isAnswered:w.answers[w.activeQuestionIndex].answer>-1,answerOptions:null===(i=w.questions[w.activeQuestionIndex])||void 0===i?void 0:i.answers,currentSelectedOption:w.answers[w.activeQuestionIndex].answer,onClick:function(t){e.withExplanation||(!function(){var e;(0,T.L9)({eventType:"rubelEndQuizAnswerQuestion",context:(0,o.Z)((0,r.Z)({},g()),{current_question_serial:(null===(e=w.questions[w.activeQuestionIndex])||void 0===e?void 0:e.serial)||"",current_question_num:w.activeQuestionIndex+1,total_num_questions:w.questions.length,entry_point:S()})})}(),y({type:"SET_ANSWER",payload:{questionSerial:w.questions[w.activeQuestionIndex].serial,answerIndex:t,questionIndex:w.activeQuestionIndex}}))},isAbleToChangeAnswer:!e.withExplanation,letterOptions:e.labels.letterOptions}),(0,l.jsx)(E.i,{labels:{text:x.quizReport.text,buttonText:x.quizReport.buttonText},onReportClick:function(){D((0,l.jsx)(m.k,{radioOptionList:e.quizReportOptions,isLoading:!1,onCancel:function(){return Z()},labels:x.report,onSubmit:function(t){var n,i,r=t.radioValue,o=t.textareaValue;Z(),e.handleSubmitReport({questionSerial:(null===(n=w.questions[w.activeQuestionIndex])||void 0===n?void 0:n.serial)||"",questionVersion:(null===(i=w.questions[w.activeQuestionIndex])||void 0===i?void 0:i.version)||0,reason:"".concat(r).concat(o?"|".concat(o):"")})}}))}}),e.withExplanation&&w.questions[w.activeQuestionIndex].contentDefinition&&(0,l.jsx)(h.G,{currentPage:w.activeQuestionIndex+1,label:{mainText:x.explanation.mainText},state:w.answers[w.activeQuestionIndex].isRight?"CORRECT":"INCORRECT",correctAnswerExplanation:(null===(a=w.questions[w.activeQuestionIndex])||void 0===a?void 0:a.contentDefinition)||"",correctAnswer:"".concat(x.explanation.correctAnswerExplanation," ").concat(b(w.answers[w.activeQuestionIndex].correctAnswerRank)),feedback:{correctAnswer:"".concat(x.explanation.selectedAnswer," ").concat(b(w.answers[w.activeQuestionIndex].answer)),title:w.answers[w.activeQuestionIndex].isRight?x.explanation.correctAnswerTitle:x.explanation.incorrectAnswerTitle,description:w.answers[w.activeQuestionIndex].isRight?x.explanation.correctAnswerMotivation:x.explanation.incorrectAnswerMotivation,right:x.explanation.right,wrong:x.explanation.wrong}})]})]}),(0,l.jsx)(V.F,{activeQuestionIndex:w.activeQuestionIndex,labels:e.labels,onChangeActiveQuestionIndex:function(e){return y({type:"SET_ACTIVE_QUESTION_INDEX",payload:e})},questionsLength:w.questions.length,onSubmit:function(){D((0,l.jsx)(Q.L,{labels:{areYouSure:x.areYouSure,haventWorked:x.haventWorked,no:x.no,sure:x.sure},unansweredNumbers:w.unansweredNumbers,onCloseModal:function(){return Z()},onSubmit:function(){return j()}}))},withExplanation:e.withExplanation})]})]})})}var z=n(36338),B=n(25867),W=n(92851),H=n(74119),F=n(23329);function X(e){var t=e.labels,n=e.result,i=e.hasGamification,r=e.gamification,o=(0,q.useRouter)(),a=(0,z.e)().isMobile,s=function(){e.onGoToNextMission(),o.push(e.nextMission.slug)};return(0,l.jsxs)(d.Kq,{spacing:{base:"0",md:"28px",lg:"12px"},w:"100%",py:{base:"0",md:"12px",xl:"12px"},px:{base:"0",md:"120px",xl:"12px"},direction:{base:"column",lg:"row"},mt:{base:"0",md:"48px"},alignItems:{base:"center",lg:"stretch"},h:"max-content",mb:e.isPassed?0:"100px",children:[(0,l.jsxs)(d.xu,{w:"100%",mb:{base:"0",md:"12px"},position:"relative",children:[a&&(0,l.jsx)(d.xu,{w:"100%",children:(0,l.jsx)(B.b,{labels:{title:t.headerTitle,gold:t.gold},bgColor:e.courseColor,subtopic:e.subtopicName,subtopicSlug:e.subtopicSlug,variant:"mobileTransparant",renderBreadcrumbs:function(){return(0,l.jsx)(F.J,{breadCrumbs:e.breadcrumbs})},hasGamification:i,gamification:r})}),n&&(0,l.jsx)(W.w,{courseColor:e.courseColor,feedbackMessage:n.scoreLabel,score:n.score,labels:{title:t.title,correct:t.correct,incorrect:t.incorrect,skipped:t.skipped,highScore:t.highScore,gold:t.gold},topic:e.subtopicName,isPassed:e.isPassed,highScore:n.highScore,correctAnswer:n.totalRightAnswer,incorrectAnswer:n.totalWrongAnswer,skippedAnswer:n.totalBlankAnswer,isLoaded:e.isLoaded,hasGamification:i&&e.isPassed,gamification:r})]}),(0,l.jsx)(d.xu,{w:"100%",px:{base:"16px",md:"0"},h:{base:"fit-content",lg:"revert"},pb:{base:"60px",md:0},children:(0,l.jsx)(H.H,{isPassed:e.isPassed,topic:e.subtopicName,labels:{badScoreMenuTitle:t.badScoreMenuTitle,badScoreMenuContent:t.badScoreMenuContent(e.passingGrade.toString()),stopAutoplay:t.stopAutoplay,goodScoreMenuContent:t.goodScoreMenuContent,retryQuizButton:t.retryQuizButton,explanationButton:t.explanationButton,nextMissionTitle:t.nextMissionTitle,endOfTopic:t.endOfTopicTitle},isLoaded:e.isLoaded,onRetry:e.onRetry,onSeeExplanation:e.onSeeExplanation,continuityType:e.nextMission.continuityType,subtopicSlug:e.subtopicSlug,nextMission:{title:e.nextMission.missionTitle,subtitle:e.nextMission.journeyTitle,missionImageVariant:e.nextMission.type,autoPlayDuration:1e3*e.nextMission.timer,isShown:!0,videoThubmbailUrl:e.nextMission.thumbnailURL,onClickNext:s,onAutoplayEnd:s,getCountdownSubtitle:e.labels.getCountdownSubtitle}})})]})}var K=n(4370),Y=n(10911),J=n(80239),$=n(81917),ee=n(31905),te=n(64497);function ne(e){var t,n,i,a,s,u,m,g,f,R,_,E,h,S,b,x,C,y,N,A,O,k,I,D,Z=e.labels,j=(0,L.aC)().isLoggedIn,P=(0,c.pm)(),M=(0,v.useState)(!1),U=M[0],q=M[1],Q=(0,w.ru)({sourceSerial:e.meta.missionSerial||""},{enabled:j&&"RESULT"===e.quizPageState||"EXPLANATION"===e.quizPageState,onError:function(e){P({title:"Error",description:"".concat(e._tag,". Try Again."),status:"error"})}}),V=(0,w.Qx)({curriculumSerial:e.meta.curriculumSerial||"",missionSerial:e.meta.missionSerial||"",subjectSerial:e.meta.courseSerial||"",journeySerial:e.meta.subtopicSerial||"",playlistSerial:"",section:""},{enabled:j,onSettled:function(){return q(!0)}}),G=Q.isSuccess&&V.isSuccess,z=(0,L.aC)().profile,B=(0,T.w7)(),W=(0,v.useRef)((new Date).getTime()),H=function(){var t,n,i;return{user_quiz_view_id:"".concat(null===z||void 0===z?void 0:z.userCode,"|").concat((0,T._7)(),"|").concat(W.current),grade_serial:e.meta.gradeSerial,curriculum_serial:e.meta.curriculumSerial,subject_serial:e.meta.courseSerial,subtopic_serial:e.meta.subtopicSerial,mission_serial:e.meta.missionSerial,quiz_serial:null===Q||void 0===Q||null===(t=Q.data)||void 0===t?void 0:t.questionSetSerial,submission_serial:null===Q||void 0===Q||null===(n=Q.data)||void 0===n?void 0:n.serial,playlist_serial:"",entry_point:e.openedFromQuizSubmission?"SUBMITTED":(0,T.TO)((null===(i=B.prevUrl)||void 0===i?void 0:i.pathname)||"")}};(0,v.useEffect)((function(){!function(){var e=document.getElementById("quiz-result-container");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}()}),[]),(0,v.useEffect)((function(){var e,t,n,i;G&&(0,T.L9)({eventType:"rubelQuizResultPageOpened",context:(0,o.Z)((0,r.Z)({},H()),{passing_grade:80,score:Q.data.score,total_correct_answer:null!==(n=null===(e=Q.data.correctAnswers)||void 0===e?void 0:e.length)&&void 0!==n?n:0,total_wrong_answer:null!==(i=null===(t=Q.data.wrongAnswers)||void 0===t?void 0:t.length)&&void 0!==i?i:0})})}),[G]);var F,X,ne,ie,re=!!G&&(null===(t=Q.data)||void 0===t?void 0:t.score)>=e.passingGrade,oe=G?{score:(null===(n=Q.data)||void 0===n?void 0:n.score)||null,corrects:(null===(i=Q.data)||void 0===i||null===(a=i.correctAnswers)||void 0===a?void 0:a.map((function(e){return(e.questionIndex+1).toString()})))||[],incorrects:(null===(s=Q.data)||void 0===s||null===(u=s.wrongAnswers)||void 0===u?void 0:u.map((function(e){return(e.questionIndex+1).toString()})))||[],feedback:{message:(null===(m=Q.data)||void 0===m?void 0:m.scoreLabel)||"",remidialContent:(null===(g=V.data)||void 0===g?void 0:g.recommendation)||null}}:{score:0,corrects:[],incorrects:[],feedback:{message:"",remidialContent:null}},ae=function(){var t,n;(function(){var e,t,n,i,a,s,u,l;G&&(0,T.L9)({eventType:"rubelQuizResultPageNextMissionClicked",context:(0,o.Z)((0,r.Z)({},H()),{nextContentSerial:null===V||void 0===V||null===(e=V.data)||void 0===e||null===(t=e.nextMission)||void 0===t?void 0:t.missionSerial,nextContentSubjectSerial:null===V||void 0===V||null===(n=V.data)||void 0===n||null===(i=n.nextMission)||void 0===i?void 0:i.subjectSerial,nextContentSubtopicSerial:null===V||void 0===V||null===(a=V.data)||void 0===a||null===(s=a.nextMission)||void 0===s?void 0:s.journeySerial,nextContentType:null===V||void 0===V||null===(u=V.data)||void 0===u||null===(l=u.nextMission)||void 0===l?void 0:l.type})})}(),e.mission.isLastBanderMission)?e.toggleQuizPageState("TRANSITION"):e.handleRedirectNextMission((null===V||void 0===V||null===(t=V.data)||void 0===t||null===(n=t.nextMission)||void 0===n?void 0:n.slug)||"")},se=function(){var t;e.setSubmissionSerial((null===Q||void 0===Q||null===(t=Q.data)||void 0===t?void 0:t.serial)||""),e.toggleQuizPageState("EXPLANATION")};return(0,l.jsx)(d.xu,{w:"100%",minH:"100vh",children:(0,l.jsxs)(d.W2,{position:"relative",w:"100%",centerContent:!0,maxW:"container.lg",id:"quiz-result-container",children:[(0,l.jsxs)(d.Kq,{spacing:"12px",direction:{base:"column",lg:"row"},p:"12px",mt:{base:"0",lg:"10vh"},w:"100%",children:[(0,l.jsx)(d.xu,{w:"100%",children:(0,l.jsx)(p.Od,{borderRadius:"12px",isLoaded:U,children:(0,l.jsx)(K.D,{isCelebrate:re,labels:{title:oe.feedback.message,scoreTitle:Z.scoreTitle},score:oe.score||0})})}),(0,l.jsx)(d.xu,{w:"100%",bg:"white",borderRadius:"12px",p:"12px",pb:"0",children:(0,l.jsxs)(d.gC,{spacing:"12px",w:"100%",children:[(0,l.jsx)(d.xv,{textStyle:"subtitle",lineHeight:"24px",textAlign:"left",w:"100%",children:Z.subtitle}),(0,l.jsx)(d.xu,{w:"100%",children:(0,l.jsx)(Y.t,{labels:{correct:Z.correct,incorrect:Z.incorrect,question:Z.question,questionPrefix:Z.questionPrefix},corrects:oe.corrects,incorrects:oe.incorrects,onClickQuestionTag:function(t,n){var i,a;if((null===Q||void 0===Q||null===(i=Q.data)||void 0===i?void 0:i.correctAnswers)&&(null===Q||void 0===Q||null===(a=Q.data)||void 0===a?void 0:a.wrongAnswers)){var s,u,l="correct"===t?null===Q||void 0===Q||null===(s=Q.data)||void 0===s?void 0:s.correctAnswers[n]:null===Q||void 0===Q||null===(u=Q.data)||void 0===u?void 0:u.wrongAnswers[n];!function(e){var t=e.type,n=e.questionIndex,i=e.questionSerial;(0,T.L9)({eventType:"correct"===t?"rubelQuizResultPageCorrectAnswerClicked":"rubelQuizResultPageWrongAnswerClicked",context:(0,o.Z)((0,r.Z)({},H()),{question_index:n,question_serial:i})})}({type:t,questionIndex:l.questionIndex,questionSerial:l.questionSerial}),e.setInitialQuizPage(Number(l.questionIndex+1)),se()}}})}),!re&&(0,l.jsx)(d.xu,{w:"100%",children:(0,l.jsx)(p.Od,{borderRadius:"12px",isLoaded:U,children:(0,l.jsx)(J.r,{labels:{title:Z.remidialTitle,subtitle:Z.remidialSubtitle},videoTitle:(null===(f=oe.feedback.remidialContent)||void 0===f?void 0:f.title)||"",videoSubtitle:(null===(R=oe.feedback.remidialContent)||void 0===R?void 0:R.subjectTitle)||"",image:(null===(_=oe.feedback.remidialContent)||void 0===_?void 0:_.thumbnailURL)||"",slug:"".concat(null===(E=oe.feedback.remidialContent)||void 0===E?void 0:E.slug),onClick:function(){var e,t,n,i,a,s;G&&(0,T.L9)({eventType:"rubelQuizResultPageVideoRecommendationClicked",context:(0,o.Z)((0,r.Z)({},H()),{recommendationMissionSerial:null===V||void 0===V||null===(e=V.data)||void 0===e||null===(t=e.recommendation)||void 0===t?void 0:t.serial,recommendationSubjectSerial:null===V||void 0===V||null===(n=V.data)||void 0===n||null===(i=n.recommendation)||void 0===i?void 0:i.subjectSerial,recommendationSubtopicSerial:null===V||void 0===V||null===(a=V.data)||void 0===a||null===(s=a.recommendation)||void 0===s?void 0:s.journeySerial})})}})})}),(0,l.jsx)(d.xu,{w:"100%",children:(0,l.jsx)(p.Od,{isLoaded:U,children:(0,l.jsx)($.B,{explanationOnClick:function(){(0,T.L9)({eventType:"rubelQuizResultPageExplanationClicked",context:(0,r.Z)({},H())}),se()},retryOnClick:function(){G&&(0,T.L9)({eventType:"rubelQuizResultPageRetryQuizClicked",context:(0,r.Z)({},H())}),e.toggleQuizPageState("QUIZ")},hasSecondaryButton:!re,labels:{retryQuizButton:Z.retryQuizButton,explanationButton:Z.explanationButton}})})})]})})]}),(0,l.jsx)(ee.f,{styles:{width:{base:"103%",md:"100%",lg:"97%"}},autoPlayDuration:1e3*(null!==(F=null===(h=V.data)||void 0===h||null===(S=h.nextMission)||void 0===S?void 0:S.timer)&&void 0!==F?F:0),idleTimeout:1e3*(null!==(X=null===(b=V.data)||void 0===b||null===(x=b.nextMission)||void 0===x?void 0:x.waitingTime)&&void 0!==X?X:0),isShown:G,title:null!==(ne=null===(C=V.data)||void 0===C||null===(y=C.nextMission)||void 0===y?void 0:y.missionTitle)&&void 0!==ne?ne:"",subtitle:Z.nextMissionCardSubtitle,missionImageVariant:(0,te.t)(null===(N=V.data)||void 0===N||null===(A=N.nextMission)||void 0===A?void 0:A.type),onClickNext:ae,ariaLabels:{nextMission:Z.nextMission,stopAutoplay:Z.stopAutoplay},onAutoplayEnd:ae,videoThubmbailUrl:null===(O=V.data)||void 0===O||null===(k=O.nextMission)||void 0===k?void 0:k.thumbnailURL,getCountdownSubtitle:e.labels.getCountdownSubtitle},null!==(ie=null===(I=V.data)||void 0===I||null===(D=I.nextMission)||void 0===D?void 0:D.missionSerial)&&void 0!==ie?ie:"")]})})}},59856:function(e,t,n){n.d(t,{qy:function(){return _},fD:function(){return f},nl:function(){return R}});var i=n(42838),r=n(70865),o=n(62680),a=n(187);a.Record({Value:a.Number,ContentType:a.String,ContentSerial:a.String,ContentParentSerial:a.String});var s=n(96670),u=(a.Record({contentSerial:a.String}),a.Record({contentSerial:a.String,contentType:a.String,value:a.Number}));function l(e,t){return function(e,t){return a.Unknown,new Promise((function(n,s){return(0,o.Z)((0,r.Z)({url:"/api/v3/content-review/like-dislike",method:"post",withAuth:!0,data:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:a.Unknown.check(e)})).then((function(e){n(e)})).catch((function(e){if((0,i.Z)(e,a.ValidationError))return s({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 29101:return s({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 29102:return s({_tag:"GENERAL_DB_ERROR",error:e});case 29103:return s({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});default:return s({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return s({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 500:return s({_tag:"GENERAL_DB_ERROR",error:e});case 400:return s({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e})}return s({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function c(e,t){return function(e,t){var n=a.Unknown;return new Promise((function(u,l){return(0,o.Z)((0,s.Z)((0,r.Z)({},t),{url:"/api/v3/content-review/report",method:"post",withAuth:!0,data:e})).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){u(e)})).catch((function(e){return(0,i.Z)(e,a.ValidationError)?l({_tag:"DECODE_ERROR",message:e.message}):e&&"errorCode"in e?(e.errorCode,l({_tag:"SERVER_ERROR",error:e})):l({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function d(e,t){return function(e,t){var n=u;return new Promise((function(u,l){return(0,o.Z)((0,s.Z)((0,r.Z)({},t),{url:"/api/v3/content-review/getlike/video_mission_rubel",method:"get",withAuth:!0,params:e})).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){u(e)})).catch((function(e){if((0,i.Z)(e,a.ValidationError))return l({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e)switch(e.errorCode){case 29101:return l({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 29102:return l({_tag:"GENERAL_DB_ERROR",error:e});case 29103:return l({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});default:return l({_tag:"SERVER_ERROR",error:e})}return l({_tag:"UNKNOWN_ERROR",error:e})}))}))}({contentSerial:e},t)}var p=n(98788),v=n(94776),m=n.n(v),g=n(82066);function f(e){return(0,g.useMutation)((function(e){return l(e)}),e)}function R(e){return(0,g.useMutation)((function(e){return c(e)}),e)}function _(e,t){return(0,g.useQuery)("likedislike-video-mission-".concat(e),(0,p.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(e);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),console.error("[fetchLikeDislikeVideo]",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),(0,r.Z)({staleTime:3e3},t))}},63550:function(e,t,n){n.d(t,{bQ:function(){return D},x7:function(){return P},zh:function(){return I},Ms:function(){return Z},MH:function(){return j}});var i=n(98788),r=n(94776),o=n.n(r),a=n(82066),s=n(70865),u=n(96670),l=n(42838),c=n(62680),d=n(187),p=d.Record({id:d.String,name:d.String,thumbnailURL:d.String,rarityName:d.String,rarityColor:d.String}),v=d.Record({id:d.String,trophyId:d.String,type:d.String,avatarItem:p,value:d.Number,avatarItemId:d.String}),m=d.Record({id:d.String,trophyId:d.String,type:d.String,value:d.Number}),g=d.Record({id:d.String,trophyEventId:d.String,name:d.String,description:d.String,difficulty:d.String,asset:d.String,requirement:d.Array(m),reward:d.Array(v)}),f=d.Record({name:d.String,rarityName:d.String,rarityColor:d.String}),R=d.Record({id:d.String,type:d.String,value:d.Number,itemID:d.String,previewURL:d.String,rewardDetail:f.Or(d.Null).Or(d.Undefined)}),_=d.Record({levelNumber:d.Number,xpRequired:d.Number,rewards:d.Array(R)}),E=d.Record({type:d.String,value:d.Number,iconUrl:d.String}),h=d.Record({checkpoint:d.Number,rewards:d.Array(E),checkpointInSecond:d.Number}),S=d.Record({userSerial:d.String,type:d.String,activityType:d.String,activitySerial:d.String,activityDynamicValue:d.Number,xpValue:d.Number,goldValue:d.Number,levelUp:d.Boolean,levelNumber:d.Number,totalXp:d.Number,totalGold:d.Number,nextLevelProgress:_,currentRewards:d.Array(R),isPassed:d.Boolean,done:d.Boolean,trophyAchieved:d.Boolean,trophyAchievedList:d.Array(g)}),b=(d.Record({activityType:d.String,activitySerial:d.String}),d.Record({activityType:d.String,activitySerial:d.String,value:d.Number})),x=(d.Record({activityType:d.String,activitySerial:d.String,value:d.Number}),d.Record({activityType:d.String,checkpointSubmissionValue:d.Number,checkpoints:d.Array(h),minimumDurationUseCheckpointInSecond:d.Number}));d.Record({activityType:d.String,activitySerial:d.String}),d.Record({type:d.String,activityType:d.String,activitySerial:d.String,activityDynamicValue:d.Number,userSerial:d.String});var C=d.Record({name:d.String,rarityName:d.String,rarityColor:d.String}),w=d.Record({id:d.String,type:d.String,value:d.Number,itemID:d.String,previewURL:d.String,rewardDetail:C}),T=d.Record({levelNumber:d.Number,xpRequired:d.Number,rewards:d.Array(w)}),y=d.Record({id:d.String,userSerial:d.String,levelID:d.String,levelNumber:d.Number,totalXp:d.Number,totalGold:d.Number,nextLevelProgress:T,interactionDuration:d.Number});function N(e,t){return function(e,t){var n=S;return new Promise((function(i,r){return(0,c.Z)((0,s.Z)({url:"/api/v3/gam/user/points",method:"post",withAuth:!0,data:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){i(e)})).catch((function(e){if((0,l.Z)(e,d.ValidationError))return r({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 26023:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 26024:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 26026:return r({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e});case 26025:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 26015:return r({_tag:"USER_POINT_DUPLICATE_ERROR",error:e});case 26028:return r({_tag:"USER_POINT_ERROR",error:e});case 26009:return r({_tag:"GET_REWARD_ACTIVITY_ERROR",error:e});case 26010:return r({_tag:"DYNAMIC_VALUE_ERROR",error:e});case 26011:return r({_tag:"REWARD_TYPE_ERROR",error:e});default:return r({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 500:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 500:return r({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e});case 400:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 400:return r({_tag:"USER_POINT_DUPLICATE_ERROR",error:e});case 500:return r({_tag:"USER_POINT_ERROR",error:e});case 500:return r({_tag:"GET_REWARD_ACTIVITY_ERROR",error:e});case 400:return r({_tag:"DYNAMIC_VALUE_ERROR",error:e});case 400:return r({_tag:"REWARD_TYPE_ERROR",error:e})}return r({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,(0,s.Z)({disableTypeValidator:!0},t))}function A(e,t){return function(e,t){var n=x;return new Promise((function(i,r){return(0,c.Z)((0,s.Z)({url:"/api/v3/gam/user/reward_checkpoint",method:"get",withAuth:!0,params:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){i(e)})).catch((function(e){if((0,l.Z)(e,d.ValidationError))return r({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 26023:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 26001:return r({_tag:"GENERAL_DATA_NOT_FOUND_ERROR",error:e});case 26024:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});default:return r({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 404:return r({_tag:"GENERAL_DATA_NOT_FOUND_ERROR",error:e});case 500:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e})}return r({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function L(e,t){return function(e,t){var n=b;return new Promise((function(i,r){return(0,c.Z)((0,s.Z)({url:"/api/v3/gam/user/checkpoint",method:"post",withAuth:!0,data:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){i(e)})).catch((function(e){if((0,l.Z)(e,d.ValidationError))return r({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 26023:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 26024:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 26029:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});default:return r({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 500:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 400:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e})}return r({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function O(e){return function(e){var t=y;return new Promise((function(n,i){return(0,c.Z)((0,s.Z)({url:"/api/v3/gam/user/profile/summary",method:"get",withAuth:!0},e)).then((function(n){return(null===e||void 0===e?void 0:e.disableTypeValidator)?n:t.check(n)})).then((function(e){n(e)})).catch((function(e){if((0,l.Z)(e,d.ValidationError))return i({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 26023:return i({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 26024:return i({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 26029:return i({_tag:"USER_PROFILE_ERROR",error:e});case 26026:return i({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e});default:return i({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return i({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 500:return i({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 500:return i({_tag:"USER_PROFILE_ERROR",error:e});case 500:return i({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e})}return i({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e).then((function(e){return(0,u.Z)((0,s.Z)({},e),{xpRequired:e.nextLevelProgress.xpRequired})}))}function k(e,t){return function(e,t){var n=S;return new Promise((function(i,r){return(0,c.Z)((0,s.Z)({url:"/api/v3/gam/user/points/checkpoint",method:"post",withAuth:!0,data:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){i(e)})).catch((function(e){if((0,l.Z)(e,d.ValidationError))return r({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 26023:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 26024:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 26026:return r({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e});case 26025:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 26015:return r({_tag:"USER_POINT_DUPLICATE_ERROR",error:e});case 26028:return r({_tag:"USER_POINT_ERROR",error:e});case 26009:return r({_tag:"GET_REWARD_ACTIVITY_ERROR",error:e});case 26010:return r({_tag:"DYNAMIC_VALUE_ERROR",error:e});case 26011:return r({_tag:"REWARD_TYPE_ERROR",error:e});default:return r({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 500:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 500:return r({_tag:"INTERNAL_SERVICE_CALL_ERROR",error:e});case 400:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 400:return r({_tag:"USER_POINT_DUPLICATE_ERROR",error:e});case 500:return r({_tag:"USER_POINT_ERROR",error:e});case 500:return r({_tag:"GET_REWARD_ACTIVITY_ERROR",error:e});case 400:return r({_tag:"DYNAMIC_VALUE_ERROR",error:e});case 400:return r({_tag:"REWARD_TYPE_ERROR",error:e})}return r({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function I(e){return(0,a.useMutation)("create-user-points",(function(e,t){return N(e,t)}),e)}function D(e,t,n){return(0,a.useQuery)("activityTypeCheckpoins-".concat(e.activityType,"-").concat(e.activitySerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",A(e,n));case 4:throw t.prev=4,t.t0=t.catch(0),console.error("[activityTypeCheckpoins]",t.t0),t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,4]])}))),t)}function Z(e){return(0,a.useMutation)("submit-checkpoint",(function(e,t){return L(e,t)}),e)}function j(e,t){return(0,a.useQuery)("summaryUserProfile",(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",O(t));case 4:throw e.prev=4,e.t0=e.catch(0),console.error("[summaryUserProfile]",e.t0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,4]])}))),e)}function P(e){return(0,a.useMutation)("create-checkpoint-user-points",(function(e,t){return k(e,t)}),e)}},28160:function(e,t,n){n.d(t,{N:function(){return E},M:function(){return h}});var i=n(98788),r=n(94776),o=n.n(r),a=n(82066),s=n(70865),u=n(96670),l=n(26297),c=n(42838),d=n(62680),p=n(187),v=p.Record({id:p.Number,title:p.String,description:p.String,activityType:p.String,userSerial:p.String,count:p.Number,currentCount:p.Number,url:p.String,status:p.String}),m=p.Record({name:p.String,title:p.String,rewardType:p.String,asset:p.String,isPremium:p.Boolean,status:p.String,rewardTheme:p.String,baseURL:p.String,id:p.Number,assetIcon:p.String,rewardLevel:p.Number,description:p.String}),g=p.Record({isEmotionIncreased:p.Boolean,newEmotionLevel:p.Number,newEmotionLevelLabel:p.String,isEmotionIncreasedTitle:p.String,isEmotionIncreasedDescription:p.String,isLevelMissionDone:p.Boolean,isLevelUp:p.Boolean,currentMissionCount:p.Number,totalMissionCount:p.Number,baseURL:p.String,iconURL:p.String,missionDoneDescription:p.String}),f=(p.Record({activityType:p.String}),p.Record({level:p.Number,userPetId:p.Number,petId:p.Number,userSerial:p.String,name:p.String,themeColor:p.String,baseURL:p.String,levelProgressDescription:p.String,missionDoneStamp:p.String,rewards:p.Array(m),missions:p.Array(v)}));function R(e){return function(e){var t=f;return new Promise((function(n,i){return(0,d.Z)((0,s.Z)({url:"/api/v3/gam/pet/level/detail",method:"get",withAuth:!0},e)).then((function(n){return(null===e||void 0===e?void 0:e.disableTypeValidator)?n:t.check(n)})).then((function(e){n(e)})).catch((function(e){if((0,c.Z)(e,p.ValidationError))return i({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 99001:return i({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 99002:return i({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 99003:return i({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 99004:return i({_tag:"GENERAL_DB_ERROR",error:e});default:return i({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return i({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 400:return i({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 500:return i({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 500:return i({_tag:"GENERAL_DB_ERROR",error:e})}return i({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e).then((function(e){var t=e.missions,n=e.rewards,i=e.baseURL,r=e.missionDoneStamp,o=(0,l.Z)(e,["missions","rewards","baseURL","missionDoneStamp"]),a=t.length,c=t.filter((function(e){return"DONE"===e.status})).length,d=t.map((function(e){return{title:e.title,subtitle:e.description,status:e.status,count:e.count,currentCount:e.currentCount}})),p=n.map((function(e){return{title:e.title,subtitle:e.name,imageUrl:"".concat(e.baseURL,"/").concat(e.assetIcon),variant:"GOLD"===e.rewardTheme?"GOLD":"SILVER",rewardLevel:e.rewardLevel,status:e.status}})),v="".concat(i,"/").concat(r),m=n.filter((function(e){return"CLAIMED"===e.status})).length,g=n.length;return(0,u.Z)((0,s.Z)({},o),{missionCount:a,missionDoneCount:c,petMissions:d,petRewards:p,doneStampUrl:v,claimedReward:m,availableReward:g})}))}function _(e,t){return function(e,t){var n=g;return new Promise((function(i,r){return(0,d.Z)((0,s.Z)({url:"/api/v3/gam/pet/progress",method:"post",withAuth:!0,data:e},t)).then((function(e){return(null===t||void 0===t?void 0:t.disableTypeValidator)?e:n.check(e)})).then((function(e){i(e)})).catch((function(e){if((0,c.Z)(e,p.ValidationError))return r({_tag:"DECODE_ERROR",message:e.message});if(e&&"errorCode"in e&&e.errorCode)switch(e.errorCode){case 99001:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 99002:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 99003:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 99004:return r({_tag:"GENERAL_DB_ERROR",error:e});case 99008:return r({_tag:"GENERAL_NOT_FOUND_ERROR",error:e});default:return r({_tag:"SERVER_ERROR",error:e})}else if(e&&"statusCode"in e&&e.statusCode)switch(e.statusCode){case 500:return r({_tag:"GENERAL_INTERNAL_ERROR",error:e});case 400:return r({_tag:"GENERAL_BAD_REQUEST_ERROR",error:e});case 500:return r({_tag:"GENERAL_INTERNAL_CONTEXT_ERROR",error:e});case 500:return r({_tag:"GENERAL_DB_ERROR",error:e});case 404:return r({_tag:"GENERAL_NOT_FOUND_ERROR",error:e})}return r({_tag:"UNKNOWN_ERROR",error:e})}))}))}(e,t)}function E(e,t){return(0,a.useQuery)("usePetLevelDetail",(0,i.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("[usePetLevelDetail]",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),e)}function h(e){return(0,a.useMutation)(["progress-user-pet"],(function(e,t){return _(e,t)}),e)}},83518:function(e,t,n){n.d(t,{hl:function(){return w},Ww:function(){return b},oH:function(){return S},Yu:function(){return h},Qx:function(){return E},ru:function(){return _},IB:function(){return x},BF:function(){return R},X4:function(){return C}});var i=n(98788),r=n(94776),o=n.n(r),a=n(82066),s=n(70865),u=n(84754),l=n(52953);function c(e,t){return(0,l.k0)(e,t).then((function(e){return e}))}function d(e,t){return(0,l.kx)(e,t).then((function(e){return{serial:e.serial,score:e.score,scoreLabel:e.scoreLabel,correctAnswers:e.correctAnswers,wrongAnswers:e.wrongAnswers,questionSetSerial:e.questionSetSerial}}))}function p(e,t){return(0,l.GU)(e,t)}function v(e,t){return(0,l.Pb)(e,t)}function m(e,t){return(0,l.DA)(e,t)}function g(e,t){return(0,l.Am)(e,(0,s.Z)({disableTypeValidator:!0},t))}function f(e,t){return(0,l._q)(e,t)}function R(e,t,n){return(0,a.useQuery)("quizStatus-".concat(e.journeySerial,"-").concat(e.missionSerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(e,n);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("[getQuizStatus] ",JSON.stringify(t.t0)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),t)}function _(e,t,n){return(0,a.useQuery)("quizResult-".concat(e.sourceSerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(e,n);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("[getQuizResult] ",JSON.stringify(t.t0)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),t)}function E(e,t,n){return(0,a.useQuery)("quizNextMission-".concat(e.journeySerial,"-").concat(e.missionSerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(e,n);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("[getQuizResultNextMission] ",JSON.stringify(t.t0)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),t)}function h(e,t,n){return(0,a.useQuery)("getQuizExplanation-".concat(e),(0,i.Z)(o().mark((function t(){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(e,n);case 3:return i=t.sent,t.abrupt("return",i);case 7:throw t.prev=7,t.t0=t.catch(0),console.error("[useQuizExplanation] ",JSON.stringify(t.t0)),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),t)}function S(e,t,n){return(0,a.useQuery)("endquizResult-".concat(e.sourceSerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(e,n);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("[getEndQuizResult] ",JSON.stringify(t.t0)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),t)}function b(e,t,n){return(0,a.useQuery)("endquizNextMission-".concat(e.journeySerial,"-").concat(e.missionSerial),(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(e,n);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("[getEndQuizNextMission] ",JSON.stringify(t.t0)),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),t)}function x(e,t,n){return(0,a.useQuery)("quizResultExplanation-".concat(e.submissionSerial),(0,i.Z)(o().mark((function t(){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e,n);case 3:return i=t.sent,t.abrupt("return",i);case 7:throw t.prev=7,t.t0=t.catch(0),console.error("[useQuizResultExplanation] ",JSON.stringify(t.t0)),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),t)}function C(e){return(0,a.useMutation)(["quiz-submit"],(function(e,t){return function(e,t){return(0,u.Bq)(e,t)}(e,t)}),e)}function w(e){return(0,a.useMutation)(["answer-check"],(function(e,t){return function(e,t){return(0,l.Rl)(e,t)}(e,t)}),e)}}}]);